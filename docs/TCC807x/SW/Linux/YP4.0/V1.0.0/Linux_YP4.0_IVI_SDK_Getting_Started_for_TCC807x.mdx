import Layout from '@theme/Layout'

<Layout title="Linux YP4.0 IVI SDK - Getting Started for TCC807x">

<img src="media/image1.jpeg"
style="width:8.36861in;height:11.68898in" />

**Rev. 1.20 \[A\]**

**2024-10-22**

> ※ The information in this document is subject to change without notice
> and should not be construed as a commitment by Telechips, Inc.
>
> Kindly visit [www.telechips.com](http://www.telechips.com) for more
> information.
>
> **ⓒ 2024. Telechips, Inc. All rights reserved.**

**Linux YP4.0 IVI** **SDK**

**Getting Started for TCC807x**

TABLE OF CONTENTS

**Contents**

TABLE OF CONTENTS 2

1 Introduction 4

2 Board Description 4

2.1 EVB Version 4

2.1.1 CPU Board 5

2.1.2 Main Board 6

2.1.3 12.3” 1920x720 LCD Sub-board 8

2.1.4 UART Sub-board 11

2.2 Boot Mode 12

2.2.1 USB Boot Mode 12

2.2.2 eMMC Boot Mode 13

2.2.3 SNOR/eMMC Boot Mode 13

2.2.4 UFS Boot Mode 14

2.2.5 SNOR/UFS Boot Mode 14

3 Board Assembly Guide 15

3.1 Configuration 15

3.2 Assembly 16

3.3 VCP Module Connect 18

4 Build Guide 19

4.1 SDK Build Preparation 19

4.2 Yocto Project 19

4.3 Task Process 19

4.4 Yocto Project Installation 20

4.4.1 Linux Distribution Versions Supported by Yocto Project 20

4.4.2 List of Packages Required for Host Development System to use Yocto
Project 20

4.5 Install Utilities 20

4.5.1 repo 20

4.5.2 NcFTP 20

4.6 Linux_YP4.0_IVI 21

4.6.1 Composition of Linux_YP4.0_IVI 21

4.6.2 Autolinux 22

4.6.3 Detailed Configuration 31

4.7 FAQs on Build 34

4.7.1 Q1. How to rebuild Package 34

4.7.2 Q2. How to rebuild All Packages 34

4.7.3 Q3. How to modify Source Code – Use Devtool 35

4.7.4 Q4. How to add Extra Package to Image 36

4.7.5 Q5. How to modify rootfs Image without Modifying Recipes 37

4.7.6 Q6. How to change Default Setting from Read-only to Writable
rootfs 37

4.7.7 Q7. How to enable Network Environment 37

4.7.8 Q8. How to enable SSH Environment 38

4.7.9 Q9. How to enable Touch Screen Driver for Multiple LCD Sub-boards
39

4.7.10 Q10. How to build Multi-machine from One Kernel or U-Boot Source
39

4.8 Build Application 40

4.8.1 Using Application Development Toolkit (ADT) 40

4.8.2 Use Extensible SDK (eSDK) 44

4.8.3 Copy Application File to Board via USB 46

5 Firmware Downloader (FWDN) Guide 47

5.1 System Requirement 47

5.1.1 Software Requirement 47

5.1.2 Hardware Requirement 47

5.2 Linux_YP4.0_IVI Firmware Construction 48

5.2.1 Boot-firmware 49

5.2.2 Make SD Data using make_fai 51

5.2.3 Make SNOR ROM Image 56

5.3 Install VTC Driver 57

5.4 Linux_YP4.0_IVI Firmware Download Sequence 58

5.4.1 Set Board to USB Boot Mode 58

5.4.2 Open Windows Prompt or Linux Console and Test FWDN V8 58

5.4.3 Connect FWDN V8 to Board 58

5.4.4 Execute --low-format Command by Using FWDN V8 (Optional) 58

5.4.5 Download Pre-built F/W Image 58

5.4.6 Download Images to SNOR for SIC 59

5.4.7 Download “.FAI” File 59

5.4.8 Download Images to GPT Partition (Optional) 59

5.4.9 Complete FWDN and Reset Board 59

6 Booting Guide 60

6.1 Booting Guide for Board 60

6.1.1 Booting Screen 60

6.1.2 Linux Console Login 60

7 References 62

8 Revision History 63

Rev. 1.20: 2024-10-22 63

Rev. 1.10: 2024-05-31 63

Rev. 1.00: 2024-04-30 63

**Figures**

> [Figure 2.1 TCC807x CPU Board (Top View)
> [5](#_Ref27727591)](#_Ref27727591)
>
> [Figure 2.2 TCC807x Main Board (Top View)
> [6](#_Ref112757540)](#_Ref112757540)
>
> [Figure 2.3 TCC807x Main Board (Bottom View)
> [7](#_Ref112757544)](#_Ref112757544)
>
> [Figure 2.4 TCC80XX_BOE_WLCD_12.3” LCD Sub-board (Top View)
> [8](#_Ref62576419)](#_Ref62576419)
>
> [Figure 2.5 TCC80XX_BOE_WLCD_12.3” LCD Sub-board (Bottom View)
> [9](#_Ref62576420)](#_Ref62576420)
>
> [Figure 2.6 TCCXXXX_AUO_WLCD_12.3” LCD Sub-board
> [10](#_Toc179788435)](#_Toc179788435)
>
> [Figure 2.7 TCC80XX_UART_CP2102_SV0.1.0 (Top View)
> [11](#_Toc179788436)](#_Toc179788436)
>
> [Figure 2.8 TCC80XX_UART_CP2102_SV0.1.0 (Bottom View)
> [11](#_Toc179788437)](#_Toc179788437)
>
> [Figure 3.1 Configuration of LCD Sub-board Switch for DisplayPort in
> Single Display System [16](#_Ref165369254)](#_Ref165369254)
>
> [Figure 3.2 LED Status of LCD Sub-board Switch for DisplayPort in
> Single Display System [16](#_Ref41929084)](#_Ref41929084)
>
> [Figure 3.3 Connecting CPU board to LCD
> [17](#_Ref156295301)](#_Ref156295301)
>
> [Figure 3.4 Assembled Single Display System of TCC807x EVB
> [17](#_Ref164930077)](#_Ref164930077)
>
> [Figure 3.5 Connecting CPU Board to VCP Module
> [18](#_Toc179788442)](#_Toc179788442)
>
> [Figure 4.1 Yocto Project Development Process
> [19](#_Ref40969045)](#_Ref40969045)
>
> [Figure 5.1 VTC Driver Installation Screen
> [57](#_Toc179788444)](#_Toc179788444)
>
> [Figure 6.1 U-Boot Screen [60](#_Toc40947383)](#_Toc40947383)
>
> [Figure 6.2 Connected USB to UART Bridge Interface
> [60](#_Ref66433304)](#_Ref66433304)
>
> [Figure 6.3 Console Login [61](#_Ref164947266)](#_Ref164947266)

**Tables**

> [Table 2.1 EVB Version [4](#_Ref65744751)](#_Ref65744751)
>
> [Table 2.2 Description of CPU Board (Top View)
> [5](#_Ref36478711)](#_Ref36478711)
>
> [Table 2.3 Description of Main Board (Top View)
> [6](#_Ref35613711)](#_Ref35613711)
>
> [Table 2.4 Description of Main Board (Bottom View)
> [7](#_Ref112757551)](#_Ref112757551)
>
> [Table 2.5 Description of TCC80XX_BOE_WLCD_12.3” LCD Sub-board (Top
> View) [8](#_Ref38637236)](#_Ref38637236)
>
> [Table 2.6 Description of TCC80XX_BOE_WLCD_12.3” LCD Sub-board (Bottom
> View) [9](#_Ref143247093)](#_Ref143247093)
>
> [Table 2.7 Description of UART Sub-board
> [11](#_Ref168028594)](#_Ref168028594)
>
> [Table 2.8 Set to USB 2.0 Boot Mode
> [12](#_Ref167780194)](#_Ref167780194)
>
> [Table 2.9 Set to USB 3.0 Boot Mode
> [12](#_Toc179788456)](#_Toc179788456)
>
> [Table 2.10 Set to eMMC Boot Mode
> [13](#_Ref143247249)](#_Ref143247249)
>
> [Table 2.11 Set to SNOR/eMMC Boot Mode
> [13](#_Ref143247250)](#_Ref143247250)
>
> [Table 2.12 Set to UFS Boot Mode [14](#_Ref143247251)](#_Ref143247251)
>
> [Table 2.13 Set to SNOR/UFS Boot Mode
> [14](#_Ref143247254)](#_Ref143247254)
>
> [Table 3.1 Configuration for Single Display System of TCC807x EVB
> [15](#_Ref143236920)](#_Ref143236920)
>
> [Table 3.2 Configuration of LCD Sub-board Switch for DisplayPort in
> Single Display System [16](#_Ref41918253)](#_Ref41918253)
>
> [Table 5.1 Software Requirement [47](#_Ref143248365)](#_Ref143248365)
>
> [Table 5.2 Hardware Requirement [47](#_Ref143248373)](#_Ref143248373)
>
> [Table 5.3 Linux_YP4.0_IVI Firmware Construction
> [48](#_Ref143248405)](#_Ref143248405)

# Introduction

This document describes Linux_YP4.0_IVI usage as follows:

- Board Description for TCC807x EVB

- Board Assembly Guide for TCC807x EVB

- Build Guide for Linux_YP4.0_IVI

- FWDN Guide for TCC807x in Linux_YP4.0_IVI

- Booting Guide for TCC807x EVB

# Board Description

## EVB Version

<table>
<caption><p><span id="_Ref65744751" class="anchor"></span>Table 2.1 EVB
Version</p></caption>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Board</strong></th>
<th style="text-align: center;"><strong>Board Name/Version</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">CPU board for LPDDR4/4X</td>
<td>TCC807X_LPD4_4X322_V1.0.0</td>
</tr>
<tr>
<td style="text-align: center;">CPU board for LPDDR5</td>
<td>TCC8070_LPD5322_V1.0.0</td>
</tr>
<tr>
<td style="text-align: center;">Main Board</td>
<td>TCC807X_MAIN_V1.0.0</td>
</tr>
<tr>
<td style="text-align: center;">UART Sub-board</td>
<td>TCC80XX_UART_CP2102_SV0.1.0</td>
</tr>
<tr>
<td style="text-align: center;">12.3” 1920x720 LCD</td>
<td><p>TCC80XX_BOE_WLCD_12.3_SV1.1.1</p>
<p>TCCXXXX_AUO_WLCD_12.3_SV0.1.0</p></td>
</tr>
</tbody>
</table>

**Note:** For more details, refer to “*TCC807x Common Hardware-Assembly
Manual for EVB”*. \[8\]

**Important:** The default LCD setting of Linux_YP4.0_IVI is fitted with
“TCCXXXX_AUO_WLCD_12.3”.

To use “TCC80XX_BOE_WLCD_12.3”, modify the build configuration as
described in Chapter 4.6.3.5.5.

### CPU Board

Figure 2.1 shows the top view of the TCC807x CPU board.

<img src="media/image2.png" style="width:7.27639in;height:3.69583in" />

<span id="_Ref27727591" class="anchor"></span>Figure 2.1 TCC807x CPU
Board (Top View)

Table 2.2 describes TCC807x CPU board (top view) connectors.

<table>
<caption><p><span id="_Ref36478711" class="anchor"></span>Table 2.2
Description of CPU Board (Top View)</p></caption>
<colgroup>
<col style="width: 8%" />
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Number</strong></th>
<th style="text-align: center;"><strong>Reference Number</strong></th>
<th style="text-align: center;"><strong>Name</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">JM1</td>
<td style="text-align: center;">SD Socket</td>
<td>SD memory card socket</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">J10D1</td>
<td style="text-align: center;">20-pin Right Angle Header</td>
<td>JTAG header for system debug</td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">JH3</td>
<td style="text-align: center;">40-pin Mezzanine Connector</td>
<td>Connect to MIPI1 sub-board</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;">JH6</td>
<td style="text-align: center;">40-pin Mezzanine Connector</td>
<td>Connect to PCIe1 sub-board</td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td style="text-align: center;">JC4</td>
<td style="text-align: center;">USB Type-A Connector</td>
<td>USB2.0 High speed Host connector</td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td style="text-align: center;">JC1</td>
<td style="text-align: center;">USB Type-A Connector</td>
<td>USB2.0 High speed Host and Device connector</td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td style="text-align: center;">JC3</td>
<td style="text-align: center;">USB 3.0 Type-A Connector</td>
<td>USB3.0 Super speed Host and Device connector</td>
</tr>
<tr>
<td style="text-align: center;">8</td>
<td style="text-align: center;">JC7</td>
<td style="text-align: center;">RJ45 Connector</td>
<td><blockquote>
<p>Legacy Ethernet port</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">9</td>
<td style="text-align: center;">JC6</td>
<td style="text-align: center;">TE B1 Connector</td>
<td><blockquote>
<p>Ethernet AVB port</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">10</td>
<td style="text-align: center;">SW8,9</td>
<td style="text-align: center;">Slide Switch</td>
<td><blockquote>
<p>Select the mode of Ethernet AVB</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">11</td>
<td style="text-align: center;">SW10</td>
<td style="text-align: center;">Slide Switch</td>
<td><blockquote>
<p>Select enable or disable of Safety Watchdog Timer (SWDT) function</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">12</td>
<td style="text-align: center;">CON5</td>
<td style="text-align: center;">10-pin Right Angle Header Box</td>
<td><blockquote>
<p>Header for MIPI DSI LCD module’s power</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">13</td>
<td style="text-align: center;">SW1</td>
<td style="text-align: center;">Tact Switch</td>
<td><blockquote>
<p>Switch for system reset (GRESET)</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">14</td>
<td style="text-align: center;">JSW2,3,4,5</td>
<td style="text-align: center;">Slide Switch</td>
<td><blockquote>
<p>Select the boot mode of system</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">15</td>
<td style="text-align: center;">CON2</td>
<td style="text-align: center;">24-pin Right Angle Header Box</td>
<td><blockquote>
<p>Connect to LCD module’s control signals for DP</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">16</td>
<td style="text-align: center;">SW3,4,5</td>
<td style="text-align: center;">Tact Switch</td>
<td><blockquote>
<p>Switch for test</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">17</td>
<td style="text-align: center;">CON3</td>
<td style="text-align: center;">24-pin Right Angle Header Box</td>
<td><blockquote>
<p>Header for LCD module’s control signals for DP</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">18</td>
<td style="text-align: center;">SW2</td>
<td style="text-align: center;">Slide Switch</td>
<td><blockquote>
<p>Select the path of bus</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">19</td>
<td style="text-align: center;">CON4</td>
<td style="text-align: center;">24-pin Right Angle Header Box</td>
<td><blockquote>
<p>LCD module’s control signals for DP</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">20</td>
<td style="text-align: center;">CON2</td>
<td style="text-align: center;">10-pin Right Angle Header Box</td>
<td><blockquote>
<p>Header for the remote control board’s signal</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">21</td>
<td style="text-align: center;">J8D1</td>
<td style="text-align: center;">16-pin Header</td>
<td><blockquote>
<p>Header for audio test of Time Division Multiplexing (TDM)</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">22</td>
<td style="text-align: center;">JH1</td>
<td style="text-align: center;">40-pin Mezzanine Connector</td>
<td>Connect to High Speed Serial Transmit Port (HSSTP)</td>
</tr>
<tr>
<td style="text-align: center;">23</td>
<td style="text-align: center;">JH7</td>
<td style="text-align: center;">40-pin Mezzanine Connector</td>
<td>Connect to Bluetooth and Wi-Fi sub-board</td>
</tr>
<tr>
<td style="text-align: center;">24</td>
<td style="text-align: center;">JH5</td>
<td style="text-align: center;">40-pin Mezzanine Connector</td>
<td>Connect to PCIe0 sub-board</td>
</tr>
<tr>
<td style="text-align: center;">25</td>
<td style="text-align: center;">J1</td>
<td style="text-align: center;">DP Connector</td>
<td>Connect to DP-channel LCD module</td>
</tr>
<tr>
<td style="text-align: center;">26</td>
<td style="text-align: center;">JH2</td>
<td style="text-align: center;">60-pin Mezzanine Connector</td>
<td>Connect to MIPI DSI sub-board</td>
</tr>
<tr>
<td style="text-align: center;">27</td>
<td style="text-align: center;">JH4</td>
<td style="text-align: center;">40-pin Mezzanine Connector</td>
<td>Connect to MIPI0 sub-board</td>
</tr>
</tbody>
</table>

### Main Board

Figure 2.2 shows the top view of the main board.

<img src="media/image3.png" style="width:7.27639in;height:3.87153in" />

<span id="_Ref112757540" class="anchor"></span>Figure 2.2 TCC807x Main
Board (Top View)

Table 2.3 describes the main board (top view) connectors.

| **Number** | **Reference Number** | **Name** | **Description** |
|:--:|:--:|:--:|----|
| 1 | J1 | 180-pin B to B Connector | Connect the main board to the CPU board |
| 2 | J2 | 180-pin B to B Connector | Connect the main board to the CPU board |
| 3 | CON2,3 | 24-pin Right Angle Header Box | Header to connect the external MCU signals |
| 4 | MIC2,4 | MIC | Internal MIC |
| 5 | MIC1,3 | MIC | Internal MIC |
| 6 | J4 | Phone Jack | Jack for front seat sound output |
| 7 | J7 | Phone Jack | Jack for rear seat sound output |
| 8 | J8 | Phone Jack | Jack for rear line sound output |
| 9 | J10 | Phone Jack | Jack for AUX sound input |
| 10 | J9 | Phone Jack | Jack for line sound input |

<span id="_Ref35613711" class="anchor"></span>Table 2.3 Description of
Main Board (Top View)

Figure 2.3 shows the bottom view of the main board.

<img src="media/image4.png" style="width:7.27639in;height:3.95903in" />

<span id="_Ref112757544" class="anchor"></span>Figure 2.3 TCC807x Main
Board (Bottom View)

Table 2.4 describes the main board (bottom view) connectors.

<table>
<caption><p><span id="_Ref112757551" class="anchor"></span>Table 2.4
Description of Main Board (Bottom View)</p></caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 13%" />
<col style="width: 26%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Number</strong></th>
<th style="text-align: center;"><strong>Reference Number</strong></th>
<th style="text-align: center;"><strong>Name</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">J11</td>
<td style="text-align: center;">Power Jack</td>
<td style="text-align: left;"><blockquote>
<p>12V Power Jack</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">SW9</td>
<td style="text-align: center;">Toggle Switch</td>
<td style="text-align: left;"><blockquote>
<p>Power On/Off switch</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">SW7</td>
<td style="text-align: center;">Toggle Switch</td>
<td style="text-align: left;"><blockquote>
<p>Select the Suspend To RAM (STR) mode</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;">SW8</td>
<td style="text-align: center;">Toggle Switch</td>
<td style="text-align: left;"><blockquote>
<p>Switch to enable rear camera</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td style="text-align: center;">SW6</td>
<td style="text-align: center;">Slide Switch</td>
<td style="text-align: left;"><blockquote>
<p>Select audio codec control host:</p>
<p>TCC807x or external MCU</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td style="text-align: center;">J7D1</td>
<td style="text-align: center;">14-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Connect the main board to the iPod sub-board</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td style="text-align: center;">J4S1</td>
<td style="text-align: center;">4-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Connect the main board to the external MIC</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">8</td>
<td style="text-align: center;">J10D2</td>
<td style="text-align: center;">20-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Connect the main board to the general test sub-board</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">9</td>
<td style="text-align: center;">JC1</td>
<td style="text-align: center;">USB Type-C Connector</td>
<td style="text-align: left;"><blockquote>
<p>UART debug port</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">10</td>
<td style="text-align: center;">J7D2</td>
<td style="text-align: center;">14-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Connect the main board to the debug UART sub-board</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">11</td>
<td style="text-align: center;">J4S2</td>
<td style="text-align: center;">4-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Connect the main board to the external MIC</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">12</td>
<td style="text-align: center;">J6D1</td>
<td style="text-align: center;">12-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Power for external Software Define Radio (SDR) sub-board</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">13</td>
<td style="text-align: center;">J19D1</td>
<td style="text-align: center;">38-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Header for external Software Define Radio (SDR) sub-board</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">14</td>
<td style="text-align: center;">J14D1</td>
<td style="text-align: center;">14-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Connect the main board to the external MCU sub-board</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">15</td>
<td style="text-align: center;">J6D2</td>
<td style="text-align: center;">12-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Power for external DXB sub-board</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">16</td>
<td style="text-align: center;">SW10</td>
<td style="text-align: center;">Slide Switch</td>
<td style="text-align: left;"><blockquote>
<p>Select the Software Define Radio (SDR) power control signal</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">17</td>
<td style="text-align: center;">J17D1</td>
<td style="text-align: center;">34-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Header for external DXB sub-board</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">18</td>
<td style="text-align: center;">J7D3</td>
<td style="text-align: center;">14-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Select the output channel for CAN</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">19</td>
<td style="text-align: center;">J6</td>
<td style="text-align: center;">Fiber Optical Jack</td>
<td style="text-align: left;"><blockquote>
<p>Output of S/PDIF 1</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">20</td>
<td style="text-align: center;">J3</td>
<td style="text-align: center;">Fiber Optical Jack</td>
<td style="text-align: left;"><blockquote>
<p>Input of S/PDIF</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">21</td>
<td style="text-align: center;">J5</td>
<td style="text-align: center;">Fiber Optical Jack</td>
<td style="text-align: left;"><blockquote>
<p>Output of S/PDIF 0</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">22</td>
<td style="text-align: center;">CON1</td>
<td style="text-align: center;">Test Point</td>
<td style="text-align: left;"><blockquote>
<p>Test point for connecting main board with speaker</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">23</td>
<td style="text-align: center;">J10D1</td>
<td style="text-align: center;">20-pin Header</td>
<td style="text-align: left;"><blockquote>
<p>Connect the main board to the Motor and HUD LCD</p>
</blockquote></td>
</tr>
</tbody>
</table>

**Note:** The test sub-board and camera test sub-board are not provided
by Telechips.

###  12.3” 1920x720 LCD Sub-board 

**Note:** Linux_YP4.0_IVI SDK’s default setting of LCD is fitted with
“TCCXXXX_AUO_WLCD_12.3”.

#### TCC80XX_BOE_WLCD_12.3” LCD

Figure 2.4 shows the top view of the TCC80XX_BOE_WLCD_12.3” LCD
sub-board.

<img src="media/image5.png" style="width:7.06332in;height:3.0281in" />

<span id="_Ref62576419" class="anchor"></span>Figure 2.4
TCC80XX_BOE_WLCD_12.3” LCD Sub-board (Top View)

Table 2.5 describes TCC80XX_BOE_WLCD_12.3” LCD sub-board (top view)
connectors.

<table>
<caption><p><span id="_Ref38637236" class="anchor"></span>Table 2.5
Description of TCC80XX_BOE_WLCD_12.3” LCD Sub-board (Top
View)</p></caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 12%" />
<col style="width: 27%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Number</strong></th>
<th style="text-align: center;"><strong>Reference Number</strong></th>
<th style="text-align: center;"><strong>Name</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">J13</td>
<td style="text-align: center;">26-pin LVDS Connector</td>
<td><blockquote>
<p>Connect to even channel LVDS</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">J12</td>
<td style="text-align: center;">26-pin LVDS Connector</td>
<td><blockquote>
<p>Connect to odd channel LVDS</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">CON1</td>
<td style="text-align: center;">24-pin Right Angle Pin Header Box</td>
<td><blockquote>
<p>Receive power and control signals for touch</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;">CON2</td>
<td style="text-align: center;">24-pin Right Angle Pin Header Box</td>
<td><blockquote>
<p>Receive power and control signals for touch</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td style="text-align: center;">CON3</td>
<td style="text-align: center;">24-pin Right Angle Pin Header Box</td>
<td><blockquote>
<p>Receive power and control signals</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td style="text-align: center;">CON4</td>
<td style="text-align: center;">24-pin Right Angle Pin Header Box</td>
<td><blockquote>
<p>Receive power and control signals</p>
</blockquote></td>
</tr>
</tbody>
</table>

Figure 2.5 shows the bottom view of the TCC80XX_BOE_WLCD_12.3” LCD
sub-board.

<img src="media/image6.png" style="width:7.27639in;height:3.70833in" />

<span id="_Ref62576420" class="anchor"></span>Figure 2.5
TCC80XX_BOE_WLCD_12.3” LCD Sub-board (Bottom View)

Table 2.6 describes TCC80XX_BOE_WLCD_12.3” LCD sub-board (bottom view)
connectors.

<table>
<caption><p><span id="_Ref143247093" class="anchor"></span>Table 2.6
Description of TCC80XX_BOE_WLCD_12.3” LCD Sub-board (Bottom
View)</p></caption>
<colgroup>
<col style="width: 7%" />
<col style="width: 14%" />
<col style="width: 20%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Number</strong></th>
<th style="text-align: center;"><strong>Reference Number</strong></th>
<th style="text-align: center;"><strong>Name</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">CON6</td>
<td style="text-align: center;">10-pin Power Connector</td>
<td><blockquote>
<p>Optional output power connector: Connect to the additional LCD
sub-board in DP daisy-chain mode</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">CON5</td>
<td style="text-align: center;">10-pin Power Connector</td>
<td><blockquote>
<p>Optional input power connector: Connect to the additional LCD
sub-board in DP daisy-chain mode</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">J11</td>
<td style="text-align: center;">Phone Jack</td>
<td><blockquote>
<p>Jack for audio codec output</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;">J10</td>
<td style="text-align: center;">FPC Connector</td>
<td><blockquote>
<p>Connect to touch interface of BOE LCD</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td style="text-align: center;">J9</td>
<td style="text-align: center;">FPC Connector</td>
<td><blockquote>
<p>Connect to backlight and open-LDI interface of BOE LCD</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td style="text-align: center;">J4</td>
<td style="text-align: center;">DP Connector</td>
<td><blockquote>
<p>Connect to DP interface</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">7</td>
<td style="text-align: center;">J1</td>
<td style="text-align: center;">HDMI Connector</td>
<td><blockquote>
<p>Connect to HDMI interface (not used)</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">8</td>
<td style="text-align: center;">J2</td>
<td style="text-align: center;">FAKRA Connector</td>
<td><blockquote>
<p>Connect HDMI to data output in GMSL</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">9</td>
<td style="text-align: center;">J6</td>
<td style="text-align: center;">FAKRA Connector</td>
<td><blockquote>
<p>Connect to DP_A for data output in GMSL</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">10</td>
<td style="text-align: center;"><blockquote>
<p>J5</p>
</blockquote></td>
<td style="text-align: center;"><blockquote>
<p>FAKRA Connector</p>
</blockquote></td>
<td><blockquote>
<p>Connect to DP_B for data output in GMSL</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">11</td>
<td style="text-align: center;">J7</td>
<td style="text-align: center;">FAKRA Connector</td>
<td><blockquote>
<p>Connect to DP in daisy-chain mode for data output in GMSL</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">12</td>
<td style="text-align: center;">J8</td>
<td style="text-align: center;">FAKRA Connector</td>
<td><blockquote>
<p>Connect to DP or HDMI for data output in GMSL (not used)</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">13</td>
<td style="text-align: center;">SW5</td>
<td style="text-align: center;">DIP Switch</td>
<td><blockquote>
<p>Select the display mode of deserializer CFG1</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">14</td>
<td style="text-align: center;">SW3,4</td>
<td style="text-align: center;">DIP Switch</td>
<td><blockquote>
<p>Select the display mode of deserializer CFG0</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">15</td>
<td style="text-align: center;">SW6</td>
<td style="text-align: center;">Slide Switch</td>
<td><blockquote>
<p>Select the LVDS source of BOE LCD</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">16</td>
<td style="text-align: center;">SW2</td>
<td style="text-align: center;">Slide Switch</td>
<td><blockquote>
<p>Select the GPIOs to control the HDMI or DP interface</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">17</td>
<td style="text-align: center;">SW1</td>
<td style="text-align: center;">Slide Switch</td>
<td><blockquote>
<p>Select the GPIOs to control the LVDS or SER/DES interface</p>
</blockquote></td>
</tr>
</tbody>
</table>

**  
**

#### TCCXXXX_AUO_WLCD_12.3” LCD

<img src="media/image7.png" style="width:7.27639in;height:5.68194in" />

<span id="_Toc179788435" class="anchor"></span>Figure 2.6
TCCXXXX_AUO_WLCD_12.3” LCD Sub-board

### UART Sub-board

The UART sub-board is a USB to UART bridge board that provides RS232 to
USB 2.0 Full-Speed interface.

The EVB's UART interface will be provided on the main board or sub-board
depending on the manufacturer’s parts supply and demand situation.

<img src="media/image8.png" style="width:2.93979in;height:1.85652in" />

<span id="_Toc179788436" class="anchor"></span>Figure 2.7
TCC80XX_UART_CP2102_SV0.1.0 (Top View)

<img src="media/image9.png" style="width:3.03824in;height:1.87034in" />

<span id="_Toc179788437" class="anchor"></span>Figure 2.8
TCC80XX_UART_CP2102_SV0.1.0 (Bottom View)

Table 2.7 describes the UART sub-board connectors.

<table>
<caption><p><span id="_Ref168028594" class="anchor"></span>Table 2.7
Description of UART Sub-board</p></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Number</strong></th>
<th style="text-align: center;"><strong>Reference Number</strong></th>
<th style="text-align: center;"><strong>Name</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">JC1,2,3,4</td>
<td style="text-align: center;">USB Type-C Connector</td>
<td><blockquote>
<p>USB to UART debug port</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">JH1</td>
<td style="text-align: center;">14-pin Header</td>
<td><blockquote>
<p>Connect to main board</p>
</blockquote></td>
</tr>
</tbody>
</table>

## Boot Mode

### USB Boot Mode

| **USB 2.0 Boot Mode Switch** | **FWDN Port** |
|:--:|:--:|
| <img src="media/image10.png" style="width:1.24984in;height:1.09361in" /> | <img src="media/image11.png" style="width:2.58661in;height:1.33858in" /> |

<span id="_Ref167780194" class="anchor"></span>Table 2.8 Set to USB 2.0
Boot Mode

| **USB 3.0 Boot Mode Switch** | **USB3.0 Port** |
|:--:|:--:|
| <img src="media/image12.png" style="width:1.14567in;height:1.07874in" /> | <img src="media/image13.png" style="width:2.65354in;height:1.33858in" /> |

<span id="_Toc179788456" class="anchor"></span>Table 2.9 Set to USB 3.0
Boot Mode

### eMMC Boot Mode

<table>
<caption><p><span id="_Ref143247249" class="anchor"></span>Table 2.10
Set to eMMC Boot Mode</p></caption>
<colgroup>
<col style="width: 35%" />
<col style="width: 39%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>eMMC Boot Mode
Switch</strong></th>
<th style="text-align: center;"><strong>Reset Switch</strong></th>
<th style="text-align: center;"><strong>Note</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img src="media/image14.png"
style="width:1.26026in;height:1.09361in" /></td>
<td style="text-align: center;"><img src="media/image15.png"
style="width:2.33264in;height:1.26111in" /></td>
<td style="text-align: left;"><blockquote>
<p>The reset button is on the bottom right corner of the board.</p>
</blockquote></td>
</tr>
</tbody>
</table>

### SNOR/eMMC Boot Mode

<table>
<caption><p><span id="_Ref143247250" class="anchor"></span>Table 2.11
Set to SNOR/eMMC Boot Mode</p></caption>
<colgroup>
<col style="width: 35%" />
<col style="width: 39%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>SNOR/eMMC Boot Mode
Switch</strong></th>
<th style="text-align: center;"><strong>Reset Switch</strong></th>
<th style="text-align: center;"><strong>Note</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img src="media/image16.png"
style="width:1.14567in;height:1.07874in" /></td>
<td style="text-align: center;"><img src="media/image15.png"
style="width:2.33264in;height:1.26111in" /></td>
<td style="text-align: left;"><blockquote>
<p>The reset button is on the bottom right corner of the board.</p>
</blockquote></td>
</tr>
</tbody>
</table>

### UFS Boot Mode

<table>
<caption><p><span id="_Ref143247251" class="anchor"></span>Table 2.12
Set to UFS Boot Mode</p></caption>
<colgroup>
<col style="width: 32%" />
<col style="width: 42%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>UFS Boot Mode
Switch</strong></th>
<th style="text-align: center;"><strong>Reset Switch</strong></th>
<th style="text-align: center;"><strong>Note</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img src="media/image17.png"
style="width:1.14567in;height:1.07874in" /></td>
<td style="text-align: center;"><img src="media/image15.png"
style="width:2.33264in;height:1.26111in" /></td>
<td style="text-align: left;"><blockquote>
<p>The reset button is on the bottom right corner of the board.</p>
</blockquote></td>
</tr>
</tbody>
</table>

### SNOR/UFS Boot Mode

<table>
<caption><p><span id="_Ref143247254" class="anchor"></span>Table 2.13
Set to SNOR/UFS Boot Mode</p></caption>
<colgroup>
<col style="width: 32%" />
<col style="width: 42%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>SNOR/UFS Boot Mode
Switch</strong></th>
<th style="text-align: center;"><strong>Reset Switch</strong></th>
<th style="text-align: center;"><strong>Note</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img src="media/image18.png"
style="width:1.14567in;height:1.0748in" /></td>
<td style="text-align: center;"><img src="media/image15.png"
style="width:2.33264in;height:1.26111in" /></td>
<td style="text-align: left;"><blockquote>
<p>The reset button is on the bottom right corner of the board.</p>
</blockquote></td>
</tr>
</tbody>
</table>

**Note:** For more details, refer to “*TCC807x Common Hardware-User
Guide for EVB*”. \[12\]

# Board Assembly Guide

## Configuration

Table 3.1 shows the configuration for single display system of the
TCC807x EVB.

<table>
<caption><p><span id="_Ref143236920" class="anchor"></span>Table 3.1
Configuration for Single Display System of TCC807x EVB</p></caption>
<colgroup>
<col style="width: 40%" />
<col style="width: 49%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Figure</strong></th>
<th style="text-align: center;"><strong>Name/Specification</strong></th>
<th style="text-align: center;"><strong>Quantity</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img src="media/image19.png"
style="width:1.34252in;height:0.62992in" /></td>
<td style="text-align: center;"><p>TCC807X_LPD4_4X322</p>
<p>TCC8070_LPD5322</p></td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image20.png"
style="width:1.35039in;height:0.62992in" /></td>
<td style="text-align: center;">TCC807X_MAIN</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image21.png"
style="width:1.336in;height:0.59915in" /></td>
<td style="text-align: center;"><p>TCC80XX_BOE_WLCD_12.3</p>
<p>or</p>
<p>TCCXXXX_AUO_WLCD_12.3</p></td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image22.jpeg"
style="width:0.68481in;height:0.68481in" /></td>
<td style="text-align: center;">DisplayPort Cable</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image23.png"
style="width:0.44854in;height:0.58446in" /></td>
<td style="text-align: center;">FAKRA Cable</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image24.png"
style="width:0.53918in;height:0.5468in" /></td>
<td style="text-align: center;">24-pin Flat Cable</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image25.jpeg"
style="width:0.35799in;height:0.35799in" /></td>
<td style="text-align: center;">Screw nut</td>
<td style="text-align: center;">7</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image26.png"
style="width:0.54167in;height:0.52845in" /></td>
<td style="text-align: center;"><p>DC 12V Power Adapter</p>
<p>(10A or more required)</p></td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image27.png"
style="width:0.61458in;height:0.59375in" /></td>
<td style="text-align: center;">USB Micro Type Cable</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;"><img src="media/image28.png"
style="width:0.58178in;height:0.46709in" /></td>
<td style="text-align: center;">110/220V Power Cable</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>

**Caution:** Compatibility problems may occur if you use cables other
than the basic components provided by Telechips for the display and the
Power Adapter.

## Assembly

For TCC807x EVB environment, the Linux_YP4.0_IVI SDK supports DP and
MIPI DSI as an interface to WLCD_12.3’’ LCD.

This chapter describes how to configure the switches on the LCD
sub-board to use DisplayPort (DP).

**Note 1:** For multi display system (DP or MIPI DSI), refer to
“*TCC807x Common Hardware-Assembly Manual for EVB”*. \[8\]

**Note 2:** TCC807x does not support HDMI.

**Step 1:** Select the switch of the WLCD_12.3” LCD sub-board.

For DP, set the slide switches (SW1, SW2, and SW6) and DIP switches
(SW3, SW4, and SW5) as shown in Table 3.2 and Figure 3.1.

| **Display** | **SW1** | **SW2** | **SW6** | **SW4** | **SW3** | **SW5** |
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| DisplayPort | <img src="media/image29.png" style="width:0.67378in;height:0.38345in" /> | <img src="media/image29.png" style="width:0.67378in;height:0.38345in" /> | ***<u>Don’t care</u>*** | ![](media/image30.emf) | ![](media/image31.emf) | ![](media/image32.emf) |

<span id="_Ref41918253" class="anchor"></span>Table 3.2 Configuration of
LCD Sub-board Switch for DisplayPort in Single Display System

<figure>
<img src="media/image33.png" style="width:6.57672in;height:1.17123in" />
<figcaption><p><span id="_Ref165369254" class="anchor"></span>Figure 3.1
Configuration of LCD Sub-board Switch for DisplayPort in Single Display
System</p></figcaption>
</figure>

**Step 2:** Check the status of the LED indicator for the single display
system of the WLCD_12.3” LCD sub-board.

<img src="media/image34.png" style="width:4.15231in;height:1.60912in" /><span id="_Ref41929084"
class="anchor"></span>

Figure 3.2 LED Status of LCD Sub-board Switch for DisplayPort in Single
Display System

**  
**

**Step 3:** Connect the DisplayPort cable and 24-pin flat cable as
follows.

<img src="media/image35.png" style="width:6.97244in;height:4.03543in" />

<span id="_Ref156295301" class="anchor"></span>Figure 3.3 Connecting CPU
board to LCD

**Step 4:** Connect the LCD to the CPU board by using a DisplayPort
cable and a 24-pin flat cable as follows.

- Figure 3.4 shows the completely assembled single display system of the
  TCC807x EVB.

<img src="media/image36.png" style="width:7.27639in;height:4.10347in" />

<span id="_Ref164930077" class="anchor"></span>Figure 3.4 Assembled
Single Display System of TCC807x EVB

## VCP Module Connect

Connect a 24-pin flat cable as follows.

<img src="media/image37.jpeg"
style="width:7.27083in;height:3.80208in" />

<span id="_Toc179788442" class="anchor"></span>Figure 3.5 Connecting CPU
Board to VCP Module

**Important 1:** The VCP module is not a default component for TCC807x
EVB. To use the VCP module, contact Telechips. \[1\]

**Important 2:** To use the VCP module, you must download the firmware
to the VCP module. Refer to “*TCC70xx Common-User Guide for Firmware
Downloader_VCP*”. \[13\]

# Build Guide

## SDK Build Preparation 

Linux_YP4.0_IVI is based on the Yocto Project 4.0 Kirkstone. Therefore,
the Yocto Project environment must be set on the host PC to use the
Linux_YP4.0_IVI. To download SDK, source-mirror, and tools, you must
install utilities.

## Yocto Project

The Yocto Project is an open source project focuses on embedded Linux
development.

It uses a combination of Open Embedded project, which is Poky, and
***bitbake*** as the build system to make Linux images.

By using Yocto Project, you can simultaneously build the bootloader,
kernel, and rootfs.

## Task Process

Figure 4.1 shows the task process of Yocto Project. You can download the
source from the upstream based on the metadata and build it. When the
build is completed, package, image, and SDK are provided as results.

<img src="media/image38.wmf" style="width:6.87639in;height:3.37014in" />

<span id="_Ref40969045" class="anchor"></span>Figure 4.1 Yocto Project
Development Process

## Yocto Project Installation

### Linux Distribution Versions Supported by Yocto Project

The following Linux distribution versions are supported. Other
distribution versions have <u>not</u> passed the verification process in
Yocto project.

For details, refer to the following Yocto Project website:

- <https://docs.yoctoproject.org/kirkstone/ref-manual/system-requirements.html#supported-linux-distributions>

<!-- -->

- Ubuntu 20.04 (LTS)

- Ubuntu 22.04 (LTS)

- Fedora 38

- Debian GNU/Linux 11.x (Bullseye)

- AlmaLinux 8

### List of Packages Required for Host Development System to use Yocto Project

The mandatory packages must be installed on Host System (individual
computer or development server) to use Yocto Project.

For details, refer to the following Yocto Project website:

- 
- 

[https://docs.yoctoproject.org/kirkstone/ref-manual/system-requirements.html#required-packages-for-the-build-host](https://docs.yoctoproject.org/kirkstone/ref-manual/system-requirements.html#required-packages-for-the-build-host )

## Install Utilities

### repo

You can download the Linux_YP4.0_IVI through Android ***repo***.

To install the ***repo,*** refer to the following website:
<https://gerrit.googlesource.com/git-repo/>.

If ***repo*** is already installed, you can use it without
re-installation.

### NcFTP

***NcFTP*** is a browser program for the File Transfer Protocol. It is
required to download tools from Telechips’ FTP server.

For details on ***NcFTP***, refer to the following website:
<http://www.NcFTP.com/ncftp>

## Linux_YP4.0_IVI

Use ***autolinux*** to download and build the Linux_YP4.0_IVI SDK.

- ***autolinux*** (python script to automatically download and build the
  SDK)

### Composition of Linux_YP4.0_IVI

After the download is completed, you can check the following items.

<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr>
<th colspan="3" style="text-align: center;"><strong>Item</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="13" style="text-align: center;">poky</td>
<td colspan="2" style="text-align: center;">meta</td>
<td rowspan="3"><blockquote>
<p>Yocto Project 4.0 Kirkstone build system</p>
</blockquote></td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">meta-poky</td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">meta-yocto-bsp</td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">meta-arm</td>
<td><blockquote>
<p>Supports Arm toolchain Layer</p>
</blockquote></td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">meta-qt5</td>
<td><blockquote>
<p>Supports Qt5 5.6.3 Layer</p>
</blockquote></td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">meta-gplv2</td>
<td><blockquote>
<p>Supports packages to avoid GPLv3 license</p>
</blockquote></td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">meta-telechips-bsp</td>
<td><blockquote>
<p>Supports Telechips BSP Layer</p>
</blockquote></td>
</tr>
<tr>
<td rowspan="5" style="text-align: center;">meta-telechips</td>
<td style="text-align: center;">meta-core</td>
<td><blockquote>
<p>Recipes that require modification from Open Source Software (OSS)
used by Telechips Linux_YP4.0_IVI or recipes that are not in Yocto
Project 4.0</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">meta-extra</td>
<td><blockquote>
<p>OSS Layer that is added by Telechips</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">meta-qt5</td>
<td><blockquote>
<p>Supports Qt5 to support Telechips GUI application</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">meta-ivi</td>
<td><blockquote>
<p>Configuration package and example programs of In-vehicle Infotainment
(IVI)</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">meta-subcore</td>
<td><blockquote>
<p>Configuration package and example programs on sub-core</p>
</blockquote></td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">download.sh</td>
<td><blockquote>
<p>Script for downloading source-mirror and tools</p>
</blockquote></td>
</tr>
<tr>
<td colspan="3" style="text-align: center;">source-mirror</td>
<td><blockquote>
<p>Local repository for building the basic class of Linux_YP4.0_IVI</p>
</blockquote></td>
</tr>
<tr>
<td colspan="3" style="text-align: center;">fwdn_v8</td>
<td><blockquote>
<p>FWDN execute file</p>
<p>VTC driver</p>
<p>Source code</p>
</blockquote></td>
</tr>
<tr>
<td colspan="3" style="text-align: center;">mktcimg</td>
<td><blockquote>
<p>mktcimg execute file</p>
<p>Source code</p>
</blockquote></td>
</tr>
<tr>
<td colspan="3" style="text-align: center;">boot-firmware</td>
<td><blockquote>
<p>Boot-firmware files</p>
<p>Tools to make images for boot-firmware</p>
</blockquote></td>
</tr>
<tr>
<td colspan="3" style="text-align: center;">Tools</td>
<td><blockquote>
<p>Yocto Project 4.0 Kirkstone <em><strong>buildtools</strong></em></p>
</blockquote>
<ul>
<li><p>x86_64-buildtools-nativesdk-standalone-4.0.sh</p></li>
<li><p>x86_64-buildtools-extended-nativesdk-standalone-4.0.sh</p></li>
</ul></td>
</tr>
</tbody>
</table>

### Autolinux

***autolinux*** was developed by Telechips to make it easier for you to
download and build the SDK.

It does not provide all settings and functions, so you should refer to
Chapter 4.6.3 for detailed configurations.

#### Download Autolinux

You can download the ***autolinux*** script from git repository.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;"><p><strong>~/release$ git clone
ssh://git.telechips.com/linux_ivi/script/build-autolinux<br />
~/release$ cd build-autolinux<br />
~/release/build-autolinux$ git checkout linux_yp4.0_ivi_1.0.0<br />
~/release/build-autolinux$ tree</strong></p>
<blockquote>
<p>.</p>
<p>├── autolinux</p>
<p>├── classes</p>
<p>│   ├── feature.py</p>
<p>│   └── features</p>
<p>│   ├── cluster.py</p>
<p>│   ├── common.py</p>
<p>│   └── ivi.py</p>
<p>├── doc</p>
<p>│   └── variable.txt</p>
<p>├── README</p>
<p>├── script</p>
<p>│   ├── bitbake-layers.sh</p>
<p>│   ├── build_configure.sh</p>
<p>│   ├── build_image.sh</p>
<p>│   └── devtool.sh</p>
<p>└── template</p>
<p>├── linux_ivi.py</p>
<p>├── sdk.py</p>
<p>├── tcc803x_linux_cluster.py</p>
<p>├── tcc803x_linux_ivi_jvckenwood.py</p>
<p>├── tcc803x_linux_ivi_litbig.py</p>
<p>├── tcc803x_linux_ivi.py</p>
<p>├── tcc805x_linux_cluster.py</p>
<p>├── tcc805x_linux_ivi.py</p>
<p>├── tcc807x_linux_ivi_pre_release.py</p>
<p>├── tcc807x_linux_ivi.py</p>
<p>└── tcc897x_linux_cluster.py</p>
</blockquote></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

#### Composition of Autolinux

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 12%" />
<col style="width: 13%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr>
<th colspan="3" style="text-align: center;"><strong>File</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="3" style="text-align: center;">autolinux</td>
<td>Python script to automatically download and build the SDK</td>
</tr>
<tr>
<td rowspan="4" style="text-align: center;">classes</td>
<td colspan="2" style="text-align: center;">feature.py</td>
<td>Python class for SDK features</td>
</tr>
<tr>
<td rowspan="3" style="text-align: center;">features</td>
<td style="text-align: center;">cluster.py</td>
<td>File that defines supported cluster features</td>
</tr>
<tr>
<td style="text-align: center;">common.py</td>
<td>File that defines supported common features</td>
</tr>
<tr>
<td style="text-align: center;">ivi.py</td>
<td>File that defines supported IVI features</td>
</tr>
<tr>
<td style="text-align: center;">doc</td>
<td colspan="2" style="text-align: center;">variable.txt</td>
<td>Document that describes the variables used in
<em><strong>autolinux</strong></em></td>
</tr>
<tr>
<td colspan="3" style="text-align: center;">README</td>
<td>Document that describes <em><strong>autolinux</strong></em></td>
</tr>
<tr>
<td rowspan="4" style="text-align: center;">script</td>
<td colspan="2" style="text-align: center;">bitbake-layers.sh</td>
<td>Shell script to execute <em><strong>bitbake-layers</strong></em> in
<em><strong>autolinux</strong></em></td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">build_configure.sh</td>
<td>Shell script to execute <em><strong>configure</strong></em> in
<em><strong>autolinux</strong></em></td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">build_image.sh</td>
<td>Shell script to execute <em><strong>bitbake</strong></em> in
<em><strong>autolinux</strong></em></td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">devtool.sh</td>
<td>Shell script to execute <em><strong>devtool</strong></em> in
<em><strong>autolinux</strong></em></td>
</tr>
<tr>
<td rowspan="3" style="text-align: center;">template</td>
<td colspan="2" style="text-align: center;">linux_ivi.py</td>
<td>File that defines supported machines and manifests for
Linux_YP4.0_IVI SDK</td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">sdk.py</td>
<td>File that defines supported SDKs, source mirror, and build tool
paths</td>
</tr>
<tr>
<td colspan="2" style="text-align: center;">Other files</td>
<td><p>File that defines supported machines and manifests for other
SDKs</p>
<p>These files are used by other SDKs</p></td>
</tr>
</tbody>
</table>

#### Autolinux Usage

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;"><p><strong>~/release/build-autolinux$
./autolinux --help</strong></p>
<p><strong>usage: autolinux [-h] -c COMMAND [COMMAND ...] [-V] [-s SDK]
[-m MACHINE]<br />
[-x MANIFEST] [-f FEATURES [FEATURES ...]]<br />
[-sf SUBFEATURES [SUBFEATURES ...]] [--skip-ftp]</strong></p>
<p>Linux SDK Configurations</p>
<p><strong>optional arguments:<br />
</strong> <strong>-h</strong>, <strong>--help</strong> show this help
message and exit</p>
<p><strong>General Command:</strong></p>
<p><strong>-c</strong> COMMAND [COMMAND ...], <strong>--command</strong>
COMMAND [COMMAND ...]<br />
General Command to use autolinux(required option)<br />
-commands-<br />
<strong>update</strong>: sync to recipes matched manifest.xml, Be
careful local changes will be lost<br />
<strong>configure</strong> [option] [name]: setup the newer build
environment<br />
conf_opt arg : addtionally set configuration options<br />
refers to 'Configuration Options'<br />
Ex) autolinux -c configure -m tcc8050-main<br />
save [name] : save autolinux.config file to .config/<br />
load [name] : load configure file from .config/<br />
<strong>clean</strong> [option]: move current built files to recycle
directory. Recycle dir:build/delete<br />
old : delete current built files and recycle directory.<br />
all : delete total build directory<br />
<strong>build</strong> [option]: build SDK Image, choose the name of the
image to build<br />
'args' : extra command strings<br />
Ex) autolinux -c build "linux-telechips -C compile"<strong><br />
</strong> sub 'args' : building on sub-core, available only when the
with-subcore option is enabled<br />
Ex) autolinux -c build sub "linux-telechips -C compile"<br />
<strong>devtool</strong> [option] : devtool package to develop
easily<strong><br />
</strong> 'args' : extra command strings<br />
Ex) autolinux -c devtool 'modify linux-telechips<br />
sub 'args' : devtool on sub-core<br />
Ex) autolinux -c sub devtool 'modify linux-telechips'<br />
<strong>layers</strong> [option] : bitbake-layers command<br />
'args' : extra command strings<br />
Ex) autolinux -c layers add-layer 'poky/meta-telechips/meta-ivi'<br />
sub 'args' : building on sub-core, available only when the with-subcore
option is enabled<br />
Ex) autolinux -c sub layers add-layer
'poky/meta-telechips/meta-ivi/meta-ivi-subcore'<br />
<strong>make_fai</strong> : make SDdata.fai for fwdn<br />
<strong>make_updatedir</strong> [option] : make update directory for
update<br />
main : make only on the main core<br />
sub : make only on the sub core<br />
<strong>chk_security</strong> : make csv file for whether or not memory
protection technology<br />
<strong>info</strong> : show information of current configuration<br />
<strong>modify</strong> option: modify specific configure at current
set-up<br />
feature : modify features<br />
sub-feature : modify subcore features<br />
image : modify image</p>
<p><strong>-V</strong>, <strong>--version</strong> print version and
exit</p>
<p><strong>Configuration Options:</strong></p>
<p>-s SDK, --sdk SDK enter the sdk to download<br />
sdk lists<br />
ivi :['linux_ivi', 'tcc803x_linux_ivi', 'tcc805x_linux_ivi',
'tcc807x_linux_ivi']</p>
<p>cluster :['tcc897x_linux_cluster', 'tcc803x_linux_cluster',
'tcc805x_linux_cluster']<br />
-m MACHINE, --machine MACHINE<br />
enter the machine to build<br />
-x MANIFEST, --manifest MANIFEST<br />
enter the manifest to build<br />
-f FEATURES [FEATURES ...], --features FEATURES [FEATURES ...]<br />
enter the feature list<br />
Ex) -f with-subcore gpu-vz meta-update<br />
-sf SUBFEATURES [SUBFEATURES ...], --sub-features SUBFEATURES
[SUBFEATURES ...]<br />
enter the subfeature list<br />
Ex) -sf rvc gpu-vz meta-update</p>
<p><strong>Environment Options:</strong></p>
<p><strong>--skip-ftp</strong> Skip to download from Telechips FTP
Server</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

#### Download and Configure SDK

Linux_YP4.0_IVI is downloaded during the initial configuration.

Linux_YP4.0_IVI SDK’s default display is DisplayPort (DP) and default
storage is eMMC.

You can set up the initial configuration by using a configure command.
If you execute the configure command, the initial configuration is
progressed as the following four steps.

**Note:** Each step is activated only when there is at least one
selectable option.

1.  **Choose the Platform** and **SDK**.

2.  **Choose the manifest** **to repo**.

    - This step is not activated in the current version of Linux
      YP4.0_IVI (1.0.0) because there is no selection option.

3.  **Choose a Machine to build**.

4.  **Choose the features** to build.

When the configuration is completed, the set-up is saved as an
“autolinux.config”.

The following is an example of TCC8070.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;"><p><strong>~/release/build-autolinux$
./autolinux -c configure</strong></p>
<p><strong>The command is configure or Add configuration
options(sdk,machine,manifest)</strong></p>
<p><strong>Configure Start</strong></p>
<p><strong>Choose the Platform</strong></p>
<p>1.cluster</p>
<p>2.ivi</p>
<p>Select SDK(1-2): 2<br />
<strong>Choose the SDK to download</strong></p>
<p>1.linux_ivi</p>
<p>2.tcc803x_linux_ivi</p>
<p>3.tcc805x_linux_ivi</p>
<p>4.tcc807x_linux_ivi</p>
<p>Select SDK(1-4): 1</p>
<p><strong>Choose a Machine to build</strong></p>
<p>1.tcc8030-main</p>
<p>2.tcc8050-main</p>
<p>3.tcc8053-main</p>
<p>4.tcc8059-main</p>
<p>5.tcc8070-main</p>
<p>6.tcc8030-sub</p>
<p>7.tcc8050-sub</p>
<p>8.tcc8053-sub</p>
<p>9.tcc8059-sub</p>
<p>10.tcc8070-sub</p>
<p>Choose Machine(1-10): 5</p>
<p><strong>Choose the Features at tcc8070-main // "*" means selected
feature</strong></p>
<p>1. ufs Changed Boot Storage to UFS(supported : tcc8050, tcc8053,
tcc8070)</p>
<p>2. bootchart Install bootchart</p>
<p>3. network Install network packages</p>
<p>4. optee Using OPTEE</p>
<p>5. str Enable Suspend To Ram</p>
<p>* 6. with-subcore Booting with sub-core</p>
<p>7. gpu-vz GPU Virtualization</p>
<p>8. screen-share Screen Sharing</p>
<p>9. hud-display Enable display for HUD</p>
<p>* 10. support-4k-video Support 4k Video Contents</p>
<p>11. booting-animation Enable Booting Animation</p>
<p>* 12. meta-update Enable Update</p>
<p>* 13. meta-micom Enable Micom</p>
<p>0.Exit</p>
<p>Choose Features enable/disable (1-13): 0</p>
<p><strong>Choose the Features at tcc8070-sub</strong></p>
<p><strong>// In case "with-subcore" enabled in features, sub-core's
feature select step activated.</strong></p>
<p>1. ufs Changed Boot Storage to UFS(supported : tcc8050, tcc8053,
tcc8070)</p>
<p>2. bootchart Install bootchart</p>
<p>3. network Install network packages</p>
<p>4. str Enable Suspend To Ram</p>
<p>* 5. rvc Enable Rear Camera</p>
<p>6. screen-share Screen Sharing</p>
<p>7. cluster Enable Cluster</p>
<p>8. booting-animation Enable Booting Animation</p>
<p>* 9. meta-update Enable Update</p>
<p>* 10. meta-micom Enable Micom</p>
<p>0.Exit</p>
<p>Choose Features enable/disable (1-10): 0</p>
<p>...</p>
<p>...</p>
<p>tools/x86_64-buildtools-extended-nativesdk-standalone-4.0.sh</p>
<p>tools/x86_64-buildtools-nativesdk-standalone-4.0.sh</p>
<p><strong>Do you want to build tools installer version 4.0?
(y/n):</strong> y</p>
<p>Extended Build tools installer version 4.0</p>
<p>==========================================</p>
<p><strong>You are about to install the SDK to
"/home/release/build-autolinux/buildtools/4.0". Proceed [Y/n]?</strong>
Y</p>
<p>Extracting SDK..................done</p>
<p>Setting it up...done</p>
<p>SDK has been successfully set up and is ready to be used.</p>
<p>Each time you wish to use the SDK in a new shell session, you need to
source the environment setup script e.g.</p>
<p>$ .
/home/release/build-autolinux/buildtools/4.0/environment-setup-x86_64-pokysdk-linux</p>
<p>Enabled with-subcore, The autolinux script makes new configuration
files of Sub-core automatically</p>
<p>================================================================================</p>
<p><strong>SDK=linux_ivi</strong></p>
<p><strong>MANIFEST=linux_yp4.0_ivi_1.0.0.xml</strong></p>
<p><strong>DATE=2024/05/31</strong></p>
<p><strong>MACHINE=tcc8070-main</strong></p>
<p><strong>VERSION=release</strong></p>
<p><strong>FEATURES=with-subcore,support-4k-video,meta-micom,meta-update</strong></p>
<p><strong>SUBFEATURES=rvc,meta-micom,meta-update</strong></p>
<p>================================================================================</p>
<p><strong>~/release/build-autolinux$ ls</strong></p>
<p>autolinux* boot-firmware_tcc803x/ build/ classes/ fwdn_v8/ poky/
release-info/ source-mirror/ tools/ autolinux.config
boot-firmware_tcc805x/ boot-firmware_tcc807x/ buildtools/ doc/ mktcimg/
README script/ template/</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

##### Configure Command with Extra Options

The configure command can be used with the following three extra
options.

- **Configuration Options**

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;"><p><strong>~/release/build-autolinux$
./autolinux --help</strong></p>
<p>...</p>
<p><strong>Configuration Options:</strong><br />
-s SDK, --sdk SDK enter the sdk to download<br />
sdk lists<br />
ivi :['linux_ivi', 'tcc803x_linux_ivi', 'tcc805x_linux_ivi',
'tcc807x_linux_ivi']<br />
cluster :['tcc897x_linux_cluster', 'tcc803x_linux_cluster',
'tcc805x_linux_cluster']<br />
-m MACHINE, --machine MACHINE<br />
enter the machine to build<br />
-x MANIFEST, --manifest MANIFEST<br />
enter the manifest to build<br />
-f FEATURES [FEATURES ...], --features FEATURES [FEATURES ...]<br />
enter the feature list<br />
ex) -f with-subcore gpu-vz meta-update<br />
-sf SUBFEATURES [SUBFEATURES ...], --sub-features SUBFEATURES
[SUBFEATURES ...]<br />
enter the subfeature list<br />
ex) -sf rvc gpu-vz meta-update</p>
<blockquote>
<p>...</p>
</blockquote></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

- **save:** Saves the “autolinux.config” to read the next configuration.

> If you append **save**, “autolinux.config” is saved as machine name in
> the .config path.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c configure
save</strong></p>
<blockquote>
<p>...</p>
<p>tcc8070-main.config save successful</p>
</blockquote></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

- **load:** Loads the configuration files saved as **save** in the
  .config path.

  If you append **load**, the **Choose a configure to load** menu is
  activated.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c configure
load</strong></p>
<p><strong>Choose a configure to load</strong></p>
<ol type="1">
<li><p>tcc8070-main.config</p></li>
</ol>
<p>Select Config(1-1): 1</p>
<blockquote>
<p>tcc8070-main.config load successful</p>
<p>...</p>
</blockquote></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

#### Build Linux_YP4.0_IVI 

Enter **build** command to start building the SDK. The menu is activated
only when there are at least two images to be built. The way the
**build** command works is the same as ***bitbake***.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;"><strong>~/release/build-autolinux$
./autolinux -c build<br />
</strong>Read configuration from autolinux.config<br />
<strong><br />
Choose an Image to build</strong><br />
1.telechips-ivi-image-minimal<br />
2.telechips-ivi-image-multimedia<br />
3.telechips-ivi-image<br />
4.automotive-linux-platform-image<br />
Choose Image (1-4):4</th>
</tr>
</thead>
<tbody>
</tbody>
</table>

##### Result of Building SDK

The following is an example of TCC8070.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p>Enabled with-subcore, The autolinux script build Sub-core Image
automatically in background</p>
<p>NOTE: Your conf/bblayers.conf has been automatically updated.</p>
<p>Parsing recipes: 100%
|#######################################################| Time:
0:00:40</p>
<p>Parsing of 1090 .bb files complete (0 cached, 1090 parsed). 1739
targets, 266 skipped, 0 masked, 0 errors.</p>
<p>NOTE: Resolving any missing task queue dependencies</p>
<p>Build Configuration:</p>
<p>BB_VERSION = "2.0.0"</p>
<p>BUILD_SYS = "x86_64-linux"</p>
<p>NATIVELSBSTRING = "universal"</p>
<p>TARGET_SYS = "aarch64-telechips-linux"</p>
<p>MACHINE = "tcc8070-main"</p>
<p>DISTRO = "poky-telechips-systemd"</p>
<p>DISTRO_VERSION = "4.0.17"</p>
<p>TUNE_FEATURES = "aarch64 armv8-2a cortexa76-cortexa55"</p>
<p>TARGET_FPU = ""</p>
<p>LINUX_VERSION = "5.10.205"</p>
<p>KBUILD_DEFCONFIG = "tcc807x_ivi_defconfig"</p>
<p>IMAGE_FEATURES = " debug-tweaks read-only-rootfs"</p>
<p>GCCVERSION = "arm-11.2"</p>
<p>GLIBCVERSION = "2.35%"</p>
<p>INVITE_PLATFORM = " with-subcore multimedia support-4k-video
qt5/wayland micom fw-update genivi"</p>
<p>meta</p>
<p>meta-poky</p>
<p>...</p>
<p>...</p>
<p>...</p>
<p>Summary: There was 1 WARNING message shown.</p>
<p>================================================================================</p>
<p><strong>Built Images Path :
/home/release/build-autolinux/build/tcc8070-main/tmp/deploy/images/tcc8070-main</strong></p>
<p><strong>Built Images Path :
/home/release/build-autolinux/build/tcc8070-sub/tmp/deploy/images/tcc8070-sub</strong></p>
<p>================================================================================</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

##### Build Command with Additional Arguments (Optional)

The **build** command can be used with additional arguments (string
argument).

- String argument

> The **build** command supports a string argument for building the
> specific packages. The specific packages are built based on the
> machine stored in “autolinux.config”.

| **~/release/build-autolinux\$ ./autolinux -c build "linux-telechips -c compile"** |
|----|

- Sub + string argument

> The **build** command supports a string argument for building the
> specific packages on the sub-machine. This **build** command requires
> **with-subcore** feature enabled.

| **~/release/build-autolinux\$ ./autolinux -c build sub "linux-telechips -c compile"** |
|----|

#### Make “SD_Data.fai” to download Firmware

Enter **make_fai** command to make “SD_Data.fai”. The **make_fai**
command is based on the image defined in “autolinux.config”.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c
make_fai</strong></p>
<p>...</p>
<p>================================================================================</p>
<p><strong>FWDN Path :
/home/release/build-autolinux/build/tcc8070-main/tmp/deploy/fwdn</strong></p>
<p>================================================================================</p>
<p><strong>~/release/build-autolinux$ ls
build/tcc8070-main/tmp/deploy/fwdn</strong></p>
<p>boot-firmware partition.list SD_Data.fai SD_Data.gpt SD_Data.gpt.back
SD_Data.gpt.prim</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

**Note: make_fai** command is described in Chapter 5.2.2.

#### Other Commands and Options

##### Clean

The **clean** command is related to removing build history.

- **clean:** Moves the currently built files to the recycle directory.
  The recycle directory path is as follows: “build/delete/#”

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c
clean</strong></p>
<p>Read configuration from autolinux.config</p>
<p>deleted target :</p>
<blockquote>
<p>/home/release/build-autolinux/build/tcc8070-main/</p>
</blockquote>
<p>/home/release/build-autolinux/build/tcc8070-sub/</p>
<p>move current built files. recycle dir:build/delete/0</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

- **clean old:** Deletes the recycle directory.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c clean
old</strong></p>
<p>delete recycle directory in background.</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

- **clean all:** Deletes the entire build directory including build
  history. Therefore, when you rebuild the SDK after executing the
  **clean all** command, the build time takes a long time.

> **Note**: After **clean all**, you must **configure** again.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c clean
all</strong></p>
<p>All build directories will be deleted. Are you sure you want to
delete it? (y/n): y</p>
<p>delete total build directory. It takes a long time in
background!!</p>
<p><strong>~/release/build-autolinux$ ./autolinux -c
configure</strong></p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

##### Modify

The **modify** command modifies the already configured
“autolinux.config”.

- **modify feature:** Modifies the feature.

> If the **with-subcore** feature is disabled, only the main core
> feature is modified.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c modify
feature</strong></p>
<p>Read configuration from autolinux.config</p>
<p><strong>Choose the Features at tcc8070-main</strong></p>
<p>1. ufs Changed Boot Storage to UFS(supported : tcc8050, tcc8053,
tcc8070)</p>
<p>2. bootchart Install bootchart</p>
<p>3. network Install network packages</p>
<p>4. optee Using OPTEE</p>
<p>5. str Enable Suspend To Ram</p>
<p>* 6. with-subcore Booting with sub-core</p>
<p>7. gpu-vz GPU Virtualization</p>
<p>8. screen-share Screen Sharing</p>
<p>9. hud-display Enable display for HUD</p>
<p>* 10. support-4k-video Support 4k Video Contents</p>
<p>11. booting-animation Enable Booting Animation</p>
<p>* 12. meta-update Enable Update</p>
<p>* 13. meta-micom Enable Micom</p>
<p>0.Exit</p>
<p>Choose Features enable/disable (1-13): 0</p>
<p><strong>Choose the Features at tcc8070-sub</strong></p>
<p>1. ufs Changed Boot Storage to UFS(supported : tcc8050, tcc8053,
tcc8070)</p>
<p>2. bootchart Install bootchart</p>
<p>3. network Install network packages</p>
<p>4. str Enable Suspend To Ram</p>
<p>* 5. rvc Enable Rear Camera</p>
<p>6. screen-share Screen Sharing</p>
<p>7. cluster Enable Cluster</p>
<p>8. booting-animation Enable Booting Animation</p>
<p>* 9. meta-update Enable Update</p>
<p>* 10. meta-micom Enable Micom</p>
<p>0.Exit</p>
<p>Choose Features enable/disable (1-10): 0</p>
<p>================================================================================</p>
<p><strong>...</strong></p>
<p><strong>FEATURES=with-subcore,support-4k-video,meta-micom,meta-update</strong></p>
<p><strong>SUBFEATURES=rvc,meta-micom,meta-update</strong></p>
<p><strong>...</strong></p>
<p>================================================================================</p>
<p>Modify feature Successful</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

- **modify sub-feature**: Modifies the sub-feature. To modify the
  sub-feature, the feature must include **with-subcore**.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c modify
sub-feature</strong></p>
<p>Read configuration from autolinux.config</p>
<p><strong>Choose the Features at tcc8070-sub</strong></p>
<p>1. ufs Changed Boot Storage to UFS(supported : tcc8050, tcc8053,
tcc8070)</p>
<p>2. bootchart Install bootchart</p>
<p>3. network Install network packages</p>
<p>4. str Enable Suspend To Ram</p>
<p>* 5. rvc Enable Rear Camera</p>
<p>6. screen-share Screen Sharing</p>
<p>7. cluster Enable Cluster</p>
<p>8. booting-animation Enable Booting Animation</p>
<p>* 9. meta-update Enable Update</p>
<p>* 10. meta-micom Enable Micom</p>
<p>0.Exit</p>
<p>Choose Features enable/disable (1-10): 0</p>
<blockquote>
<p>================================================================================</p>
<p>...</p>
<p><strong>SUBFEATURES=rvc,meta-micom,meta-update</strong></p>
<p>================================================================================</p>
<p>Modify sub-feature Successful</p>
</blockquote></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

- **modify image**: Modifies an image. The menu is activated only when
  there are at least two images to be built.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c modify
image</strong></p>
<p>Read configuration from autolinux.config</p>
<p><strong>Choose an Image to build</strong></p>
<blockquote>
<p>1.telechips-ivi-image-minimal</p>
<p>2.telechips-ivi-image-multimedia</p>
</blockquote>
<p>3.telechips-ivi-image</p>
<p>4.automotive-linux-platform-image</p>
<p>Choose Image (1-4): 4</p>
<blockquote>
<p>========================================================================</p>
</blockquote>
<p><strong>...</strong></p>
<p><strong>IMAGE=automotive-linux-platform-image</strong></p>
<blockquote>
<p>========================================================================</p>
</blockquote>
<p>Modify image Successful</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

##### Devtool

***devtool*** is available in ***autolinux*** through **devtool**
command. For a detailed description of ***devtool***, see Chapter 0.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c devtool "modify
linux-telechips"</strong></p>
<p>Read configuration from autolinux.config</p>
<p>NOTE: Starting bitbake server...</p>
<p>...</p>
<p>...</p>
<p>INFO: Copying kernel config to workspace</p>
<p>INFO: Recipe linux-telechips now set up to build from
/home/release/build-autolinux/build/tcc8070-main/workspace/sources/linux-telechips</p>
<p><strong>~/release/build-autolinux$</strong></p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

##### Update

The **update** command executes **repo sync** by using “manifest.xml”
that is set in “autolinux.config”. (Any local changes are removed.)

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c
update</strong></p>
<p>Read configuration from autolinux.config</p>
<p>...</p>
<p>Sync Update Completed.</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

### Detailed Configuration

This chapter explains how to change settings before building the SDK. It
also includes features provided by ***autolinux***.

> Set “local.conf” as follows according to the target board.
>
> For the main core, the “local.conf” file is located at
> “../build-autolinux/build/tcc8070-main/conf”.

<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: center;"><strong>Name of Variable</strong></td>
<td style="text-align: center;"><strong>Default Value</strong></td>
<td style="text-align: center;"><strong>Description</strong></td>
</tr>
<tr>
<td style="text-align: center;">BB_NUMBER_THREADS</td>
<td style="text-align: center;">8</td>
<td style="text-align: left;"><blockquote>
<p>Maximum number of tasks that can be run simultaneously</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">PARALLEL_MAKE</td>
<td style="text-align: center;">-j 16</td>
<td style="text-align: center;"><blockquote>
<p>Option for make</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">MACHINE</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;"><blockquote>
<p>Target board setting</p>
</blockquote>
<ul>
<li><p>tcc8070-main</p></li>
</ul></td>
</tr>
<tr>
<td style="text-align: center;">EXTRA_IMAGE_FEATURES</td>
<td style="text-align: center;"><p>debug-tweaks</p>
<p>read-only-rootfs</p></td>
<td style="text-align: center;"><blockquote>
<p>Image property selected additionally</p>
<p>For detailed options, refer to “local.conf”.</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">CORE_IMAGE_EXTRA_INSTALL</td>
<td style="text-align: center;">NULL</td>
<td style="text-align: center;"><blockquote>
<p>Name of package to be installed additionally on image</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">DISTRO</td>
<td style="text-align: center;">poky-telechips-systemd</td>
<td style="text-align: center;"><blockquote>
<p>Select SDK type.</p>
</blockquote>
<ul>
<li><p>poky-telechips (sysvinit)</p></li>
<li><p>poky-telechips-systemd (systemd)</p></li>
</ul></td>
</tr>
</tbody>
</table>

> For the sub-core, the “local.conf” file is located at
> “../build-autolinux/build/tcc8070-sub/conf”.

<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: center;"><strong>Name of Variable</strong></td>
<td style="text-align: center;"><strong>Default Value</strong></td>
<td style="text-align: center;"><strong>Description</strong></td>
</tr>
<tr>
<td style="text-align: center;">BB_NUMBER_THREADS</td>
<td style="text-align: center;">8</td>
<td style="text-align: left;"><blockquote>
<p>Maximum number of tasks that can be run simultaneously</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">PARALLEL_MAKE</td>
<td style="text-align: center;">-j 16</td>
<td style="text-align: center;"><blockquote>
<p>Option for make</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">MACHINE</td>
<td style="text-align: center;">N/A</td>
<td style="text-align: center;"><blockquote>
<p>Target board setting</p>
</blockquote>
<ul>
<li><p>tcc8070-sub</p></li>
</ul></td>
</tr>
<tr>
<td style="text-align: center;">EXTRA_IMAGE_FEATURES</td>
<td style="text-align: center;"><p>debug-tweaks</p>
<p>read-only-rootfs</p></td>
<td style="text-align: center;"><blockquote>
<p>Image property selected additionally</p>
<p>For detailed options, refer to “local.conf”.</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">CORE_IMAGE_EXTRA_INSTALL</td>
<td style="text-align: center;">NULL</td>
<td style="text-align: center;"><blockquote>
<p>Name of package to be installed additionally on image</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">DISTRO</td>
<td style="text-align: center;">poky-telechips-systemd</td>
<td style="text-align: center;"><blockquote>
<p>Select SDK type.</p>
</blockquote>
<ul>
<li><p>poky-telechips (sysvinit)<br />
poky-telechips-systemd (systemd)</p></li>
</ul></td>
</tr>
</tbody>
</table>

#### Enable Main Core Functions

Use the **INVITE_PLATFORM** variable in the main core’s “local.conf” to
set the supporting functions.

<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: center;"><strong>Feature</strong></td>
<td style="text-align: center;"><strong>Configuration</strong></td>
</tr>
<tr>
<td style="text-align: center;">Support 4K Video</td>
<td style="text-align: center;"><blockquote>
<p>INVITE_PLATFORM += "support-4k-video"</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">HUD Display</td>
<td style="text-align: center;"><blockquote>
<p>INVITE_PLATFORM += "hud-display"</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">Booting Animation</td>
<td style="text-align: center;"><blockquote>
<p>INVITE_PLATFORM += "booting-animation"</p>
</blockquote></td>
</tr>
</tbody>
</table>

**Important:** The **booting-animation** feature must be configured
either in the main core or the sub-core. Therefore, if you have enabled
the feature in the sub-core, do not enable it in the main core, and vice
versa.

**Note:** When enabling the **hud-display** feature, you need to connect
an LCD to the HUD to ensure the HUD functions properly. For details,
refer to “*TCC807x Common Hardware-Assembly Manual for EVB”*. \[8\]

#### Enable Sub-core

To use the sub-core or cluster in the sub-core, you should enable the
**INVITE_PLATFORM** variable in the main core’s “local.conf”.

##### Enable Variables for GPU Virtualization

To use GPU in the sub-core, you should enable the variables for GPU
virtualization in the main core’s “local.conf”.

|        **Feature**        | **Configuration**                 |
|:-------------------------:|-----------------------------------|
|      Enable sub-core      | INVITE_PLATFORM += "with-subcore" |
| Enable GPU virtualization | INVITE_PLATFORM += "gpu-vz"       |

#### Set Up Sub-core Application

> Use **SUBCORE_APPS** variable in the sub-core’s “local.conf” i to set
> up the sub-core application for Rear View Camera (RVC) and cluster.
>
> The RVC is enabled by default.

|                   |                                        |
|:-----------------:|:--------------------------------------:|
|    **Feature**    |           **Configuration**            |
|        RVC        |         SUBCORE_APPS += "rvc"          |
|      Cluster      |       SUBCORE_APPS += "cluster"        |
| Booting Animation | INVITE_PLATFORM += "booting-animation" |

**Important 1:** The **booting-animation** feature must be configured
either in the main core or the sub-core. Therefore, if you have enabled
the feature in the sub-core, do not enable it in the main core, and vice
versa.

**Important 2:** To use the **Cluster** feature on the sub-core, you
must enable “gpu-vz” on the main core. Refer to Chapter
[4.6.3.2.1](#enable-variables-for-gpu-virtualization).

**Important 3:** The cluster application is developed by Altia, and you
must use this application only for SDK validation. If you want to use it
for other purposes, contact Altia.

#### Enable STR

Use the **INVITE_PLATFORM** variable in the “local.conf” of the main
core and the sub-core.

|           |                          |
|:---------:|:------------------------:|
| **Core**  |      **local.conf**      |
| Main Core | INVITE_PLATFORM += "str" |
| Sub-core  | INVITE_PLATFORM += "str" |

**Important**: To use the **STR** feature, an external MCU, VCP, is
required. For more information, refer to Chapter 3.3.

#### Additional Setting

##### Enable PulseAudio

To use PulseAudio as the Sound Server, **DISTRO_FEATURES:append = "**
**pulseaudio"** variable in the main core’s “local.conf” should be
enabled.

**Note:** **" pulseaudio"** is enabled by default.

|                  |                                        |
|:----------------:|:--------------------------------------:|
| **Sound Server** |           **Configuration**            |
|    PulseAudio    | DISTRO_FEATURES:append = " pulseaudio" |

##### Set Up Graphics System

Use **DISTRO_FEATURES:remove = "wayland"** variable in the main core’s
“local.conf” to set the Linux graphics system.

The default value is Wayland.

|                     |                                    |
|:-------------------:|:----------------------------------:|
| **Graphics System** |         **Configuration**          |
|       Wayland       |              Default               |
|        FBDEV        | DISTRO_FEATURES:remove = "wayland" |

##### Enable Vulkan

To use Vulkan, you should add vulkan to the “local.conf” of the main
core and the sub-core.

<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: center;"><strong>Core</strong></td>
<td style="text-align: center;"><strong>local.conf</strong></td>
</tr>
<tr>
<td style="text-align: center;">Main Core</td>
<td style="text-align: center;"><p>DISTRO_FEATURES:append = "
vulkan"</p>
<p>CORE_IMAGE_EXTRA_INSTALL:append = " libvulkan-telechips"</p></td>
</tr>
<tr>
<td style="text-align: center;">Sub-core</td>
<td style="text-align: center;"><p>DISTRO_FEATURES:append = "
vulkan"</p>
<p>CORE_IMAGE_EXTRA_INSTALL:append = " libvulkan-telechips"</p></td>
</tr>
</tbody>
</table>

**Important:** Vulkan is only supported on the Wayland graphics system.
To use Vulkan in sub-core, you must switch to Wayland.

##### Enable OpenCL

Use **TCC_BSP_FEATURES = " opencl"** variable in the main core and
sub-core’s “local.conf” to set the OpenCL.

<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: center;"><strong>Core</strong></td>
<td style="text-align: center;"><strong>local.conf</strong></td>
</tr>
<tr>
<td style="text-align: center;">Main Core</td>
<td style="text-align: center;"><p>TCC_BSP_FEATURES:append = "
opencl"</p>
<p>CORE_IMAGE_EXTRA_INSTALL:append = " libopencl-telechips"</p></td>
</tr>
<tr>
<td style="text-align: center;">Sub-core</td>
<td style="text-align: center;"><p>TCC_BSP_FEATURES:append = "
opencl"</p>
<p>CORE_IMAGE_EXTRA_INSTALL:append = " libopencl-telechips"</p></td>
</tr>
</tbody>
</table>

##### How to change LCD Panel AUO to BOE

The default LCD panel in the SDK is AUO. If you want to use BOE, remove
the **\#** (uncomment) from the **\#LCD_PANEL_TYPE** in the “local.conf”
in each core.

|           |                          |
|:---------:|:------------------------:|
| **Core**  |      **local.conf**      |
| Main Core | \#LCD_PANEL_TYPE = "BOE" |
| Sub-core  | \#LCD_PANEL_TYPE = "BOE" |

**Note:** For more details, refer to “*TCCxxxx Common SDK-User Guide for
AUO and BOE touch”*. \[14\]

##### How to change Sub-core 64-bit Memory Size

The default value of the 64-bit memory size for a sub-core is 512 MB. To
modify this value, you must change the value of the variable for each
core in the “local.conf” file.

|           |                                          |
|:---------:|:----------------------------------------:|
| **Core**  |              **local.conf**              |
| Main Core | SUBCORE_64BIT_MEMORY_SIZE = "0x20000000" |
| Sub-core  |     64BIT_MEMORY_SIZE = "0x20000000"     |

**Important 1:** The value of variables must be set as a hexadecimal
value, such as 0x20000000.

**Important 2:** The values of **SUBCORE_64BIT_MEMORY_SIZE** and
**64BIT_MEMORY_SIZE** must match each other.

**  
**

## FAQs on Build

This chapter describes the frequently asked questions in the Yocto
Project environment.

### Q1. How to rebuild Package

If you want to rebuild the package, you should clean and then build the
package. Follow one of the three clean task types described in Chapter
4.7.1.1 to Chapter 4.7.1.3.

#### clean and build

Clear all output. However, shared state cache data is not cleared.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>~/.../build-autolinux$ ./autolinux -c build "alsa-lib -c
clean"</p>
<p>~/.../build-autolinux$ ./autolinux -c build "alsa-lib"</p></td>
</tr>
</tbody>
</table>

#### cleanall and build

Clear all data including all results, shared state cache data, and
downloaded source code.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>~/.../build-autolinux$ ./autolinux -c build "alsa-lib -c
cleanall"</p>
<p>~/.../build-autolinux$ ./autolinux -c build "alsa-lib "</p></td>
</tr>
</tbody>
</table>

#### cleansstate and build

Clear all output and shared state cache data.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>~/.../build-autolinux$ ./autolinux -c build "alsa-lib -c
cleansstate"</p>
<p>~/.../build-autolinux$ ./autolinux -c build "alsa-lib"</p></td>
</tr>
</tbody>
</table>

### Q2. How to rebuild All Packages

The Yocto project provides a single build type per recipe, so there is
no full rebuild functionality. To rebuild all packages,

you need to clean up each package and build the image.

If you want to rebuild the packages used by the image, you can use the
following command.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>~/.../build-autolinux$ ./autolinux -c build
"automotive-linux-platform-image --runall=cleanall"</p>
<p>~/.../build-autolinux$ ./autolinux -c build</p>
</blockquote></td>
</tr>
</tbody>
</table>

### Q3. How to modify Source Code – Use Devtool

Yocto project provides ***devtool***, which has features to help you
build, test, and package software.

**Note:** ***devtool*** creates workspace directory and recipes in your
build directory and adds workspace to your “conf/bblayers.conf” after
you execute **devtool** command. Therefore, you can modify your source
code and recipes in the workspace directory.

#### Add Source Code

If you want to add your source code that has no recipe in the SDK, you
can use **devtool add** command. It assists in adding new software to be
built to the SDK. The **devtool add** command generates a new recipe
based on the existing source code.

You can add source code from a remote repository and a local directory
to the SDK:

- **devtool add {recipe name} {fetch url or source tree}**

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;"><blockquote>
<p>~/.../build-autolinux$ ./autolinux -c devtool add new-recipe
ssh://git.telechips.com/linux_ivi/bsp/kernel-5.10.git</p>
<p>~/.../build-autolinux$ ./autolinux -c devtool add new-recipe2
./workspace/sources/new-recipe/</p>
</blockquote></td>
</tr>
</tbody>
</table>

Then, the **devtool add** command generates **new-recipe** or
**new-recipe2** in workspace/recipes/new-recipe or new-recipe2. And the
source code is downloaded or copied in workspace/sources/new-recipe or
new-recipes2 directory. You can modify your recipes in the workspace.

You can find more information by using the following command: **devtool
add --help**

#### Modify Source Code

The ***devtool*** sets up an environment to enable you to modify the
existing source code in the SDK. You can modify your recipes and source
code by the following command:

- **devtool modify {recipe name}**

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>~/.../build-autolinux$ ./autolinux -c devtool modify sdk-recipe</p>
</blockquote></td>
</tr>
</tbody>
</table>

Then, the **devtool modify** command generates a “.bbappend” file in
workspace/appends/sdk-recipe.bbappend. The source code is downloaded in
workspace/sources/sdk-recipe. You can modify your source code and
“.bbappend”.

You can also apply the external source code to your recipe.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;"><blockquote>
<p>~/.../build-autolinux$ git clone
ssh://git.telechips.com/linux_ivi/bsp/kernel-5.10.git</p>
<p>~/.../build-autolinux$ ./autolinux -c devtool modify sdk-recipe</p>
</blockquote></td>
</tr>
</tbody>
</table>

You can find more information by using the following command: **devtool
modify --help**

#### Update Recipe

You can update the existing recipe to build the recipe for an updated
set of source files by using the following command:

- **devtool upgrade -V {version} {recipe name}**

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>~/.../build-autolinux$ ./autolinux -c devtool upgrade -V 1.0.1 -S
7aa51ebda4a4512375bf12ca356afb7277e6826e sdk-recipe</p>
</blockquote></td>
</tr>
</tbody>
</table>

The command above updates the SRCREV of recipe. In your workspace,
“sdk-recipe_1.0.1.bb” is generated in workspace/recipes directory, and
“sdk-recipe_1.0.1.bbappend” is generated in workspace/appends directory.

You can find more information by using the following command: **devtool
upgrade --help**

#### After Setting Environment

If you want to build your source code or recipe, you can build it by
using the following command:

- **bitbake {recipe name} or devtool build {recipe name}**

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;"><blockquote>
<p>~/.../build-autolinux$ ./autolinux -c build "new-recipe"</p>
<p>~/.../build-autolinux$ ./autolinux -c devtool build new-recipe</p>
</blockquote></td>
</tr>
</tbody>
</table>

You can install your outputs to your target by using the following
command:

- **devtool deploy-target {recipe name} {target}**

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>~/.../build-autolinux$ ./autolinux -c devtool deploy-target
new-recipe root@192.168.1.1</p>
</blockquote></td>
</tr>
</tbody>
</table>

After you finish editing recipes and source code, you can apply your
recipes to Yocto layer by using the following command:

- **devtool finish {recipe name} {layer name}**

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>~/.../build-autolinux$ ./autolinux -c devtool finish new-recipe
meta-telechips</p>
<p>~/.../build-autolinux$ ./autolinux -c devtool finish new-recipe2
meta-telechips</p>
</blockquote></td>
</tr>
</tbody>
</table>

The ***devtool*** makes the devtool branch in your workspace.

If you commit your patch to devtool branch and finish executing
***devtool***, the **devtool finish** command generates the patches and
adds the patches to the recipe.

If you want to remove your local outputs, reset the recipe by using the
following command:

- **devtool reset {recipe name} or devtool reset --all**

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>~/.../build-autolinux$ ./autolinux -c devtool reset recipe</p>
<p>~/.../build-autolinux$ ./autolinux -c devtool reset --all</p>
</blockquote></td>
</tr>
</tbody>
</table>

### Q4. How to add Extra Package to Image

If you want to install additional packages to the image that you are
currently building, you can set up the **CORE_IMAGE_EXTRA_INSTALL**
variable in “conf/local.conf” as follows:

| CORE_IMAGE_EXTRA_INSTALL += "openssh" |
|---------------------------------------|

### Q5. How to modify rootfs Image without Modifying Recipes

If you temporarily modify **rootfs** and create an image, run
**do_image** with the force option as follows:

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>~/.../build/tcc8070-main$ pushd
tmp/work/tcc8070_main-telechips-linux/automotive-linux-platform-image/1.0-r0/rootfs/</p>
<p>//modify rootfs</p>
<p>~/.../build/tcc8070-main/tmp/work/tcc8070_main-telechips-linux/automotive-linux-platform-image/1.0-r0/rootfs$
popd</p>
<p>~/.../build-autolinux$ ./autolinux -c build
"automotive-linux-platform-image -C image"</p>
<p>~/.../build-autolinux$ ./autolinux -c make_fai</p>
</blockquote></td>
</tr>
</tbody>
</table>

### Q6. How to change Default Setting from Read-only to Writable rootfs

The default setting of the SDK **rootfs** is read-only. If you want to
use writable **rootfs**, you should change the **EXTRA_IMAGE_FEATURES**
in “conf/local.conf”.

- read-only : **EXTRA_IMAGE_FEATURES = "debug-tweaks read-only-rootfs"**

- writeable : **EXTRA_IMAGE_FEATURES = "debug-tweaks"**

### Q7. How to enable Network Environment

To use network in the SDK, enable **network** feature in ***autolinux***
script.

### Q8. How to enable SSH Environment

The SDK supports SSH server based on openSSH.

**Note:** IP address, MAC address, and Gateway address must be set
according to your environment.

To use network in the SDK, enable **ssh-server-openssh** feature in
***autolinux*** script.

Select **network** feature first, then select **ssh-server-openssh**
feature.

The following is an example of TCC8070.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p><strong>~/release/build-autolinux$ ./autolinux -c modify
feature</strong></p>
<p>Read configuration from autolinux.config</p>
<p>Choose the Features at tcc8070-main</p>
<p>1. ufs Changed Boot Storage to UFS(supported : tcc8050, tcc8053,
tcc8070)</p>
<p>2. bootchart Install bootchart</p>
<p>3. <strong>network</strong> Install network packages</p>
<p>4. optee Using OPTEE</p>
<p>...</p>
<p>0.Exit</p>
<p>Choose Features enable/disable (1-13): 3</p>
<p>Choose the Features at tcc8070-main</p>
<p>1. ufs Changed Boot Storage to UFS(supported : tcc8050, tcc8053,
tcc8070)</p>
<p>2. bootchart Install bootchart</p>
<p>* 3. <strong>network</strong> Install network packages</p>
<p>4. ssh-server-openssh Install openssh with network packages</p>
<p>5. optee Using OPTEE</p>
<p>...</p>
<p>0.Exit</p>
<p>Choose Features enable/disable (1-14): 4</p>
<p>Choose the Features at tcc8070-main</p>
<p>1. ufs Changed Boot Storage to UFS(supported : tcc8050, tcc8053,
tcc8070)</p>
<p>2. bootchart Install bootchart</p>
<p>* 3. <strong>network</strong> Install network packages</p>
<p>* 4. <strong>ssh-server-openssh</strong> Install openssh with network
packages</p>
<p>5. optee Using OPTEE</p>
<p>...</p>
<p>0.Exit</p>
<p>Choose Features enable/disable (1-14):0</p>
<p>...</p>
<p>=================================================================================</p>
<p>...</p>
<p><strong>FEATURES=...network,ssh-server-openssh</strong></p>
<p>...</p>
<p>=================================================================================</p>
<p>Modify feature Successful</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

### Q9. How to enable Touch Screen Driver for Multiple LCD Sub-boards

For software configuration, refer to *“TCCxxxx Common SDK-Application
Note for Touch Screen Driver*”. \[11\]

For hardware configuration, refer to *“TCC807x Common Hardware-User
Guide for EVB*”. \[12\]

### Q10. How to build Multi-machine from One Kernel or U-Boot Source

To build multi-machine from one external source (kernel or U-Boot),
enable variables related to **externalsrc** in the “conf/local.conf” for
each machine as follows:

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p>INHERIT += "externalsrc"</p>
<p>//set kernel external source path</p>
<p>EXTERNALSRC:pn-linux-telechips = "${HOME}/xxx"</p>
<p>//set u-boot external source</p>
<p>EXTERNALSRC:pn-u-boot-tcc = "${HOME}/xxx"</p>
<p>EXTERNALSRC_BUILD:pn-u-boot-tcc =
"${EXTERNALSRC:pn-u-boot-tcc}"</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

Each build path is limited to multi-machine build from one kernel or
U-Boot source through Yocto.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p>//u-boot build path</p>
<p>${EXTERNALSRC:pn-u-boot-tcc}/${MACHINE}</p>
<p>//kernel build path</p>
<p>${WORKDIR}/${BPN}-${PV}</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

**Important:** The configuration files (“local.conf” and
“bblayers.conf”) are reset if you enter the **configure** command in
***autolinux*** again.

When using **externalsrc**, Yocto does not execute the **do_patch**
task.

For details on **externalsrc**, refer to the following Yocto Project
website:

- <https://docs.yoctoproject.org/ref-manual/classes.html#externalsrc>

## Build Application 

### Using Application Development Toolkit (ADT)

The ADT provided by Telechips supports Cross Compile environment based
on **sysroot**, and it is based on the toolchain (**ARM GCC 11.2**) used
in the Yocto build.

The ADT uses various environment variables to support the environment
based on **sysroot**.

Major environment variables include **CC**, **LD**, and
**CONFIGURE_FLAGS**.

Environment variables that are already defined in ADT should not be
redefined in Makefile.

To build application, you should get familiar with the following
information.

#### Build ADT

<u>Autolinux Configuration</u>

Execute ***autolinux*** build environment in the Yocto project
environment as described in Chapter 4.6.2.4. If this step is already
done, you can skip this chapter and go to Chapter 4.8.1.2.

<u>ADT Type Provided by Linux_YP4.0_IVI</u>

Linux_YP4.0_IVI supports four types of ADTs as follows:

- **meta-toolchain-telechips (ADT)**

  You can install basic packages for building Linux_YP4.0_IVI-based
  programs by using **meta-toolchain-telechips**.

  For detailed installation packages, refer to the following file:

<!-- -->

- poky/meta-telechips/meta-core/recipes-core/packagegroups/packagegroup-telechips-toolchain-target.bb

<!-- -->

- **meta-toolchain-telechips-ivi (ADT including GStreamer)**

  GStreamer and Linux_YP4.0_IVI demo applications are additionally
  installed in the **meta-toolchain-telechips**.

  For detailed installation packages, refer to the following file:

<!-- -->

- poky/meta-telechips/meta-ivi/recipes-telechips-ivi/packagegroups/packagegroup-als-ivi-toolchain-target.bb

<!-- -->

- **meta-toolchain-telechips-qt5 (ADT including GStreamer and Qt5)**

  Qt5 packages are additionally installed in
  **meta-toolchain-telechips-ivi**.

  For detailed installation packages, refer to the following files:

<!-- -->

- poky/meta-qt5/recipes-qt/packagegroups/packagegroup-qt5-toolchain-target.bb

- poky/meta-telechips/meta-ivi/recipes-qt/packagegroups/packagegroup-qt5-toolchain-target.bbappend

<!-- -->

- **meta-toolchain-telechips-subcore (ADT)**

  You can install basic packages for building Linux_YP4.0_IVI-based
  programs by using **meta-toolchain-telechips-subcore**.

  For detailed installation packages, refer to the following file:

<!-- -->

- poky/meta-telechips/meta-subcore/recipes-telechips-subcore/packagegroups/packagegroup-telechips-subcore-toolchain-target.bb

<u>Build ADT</u>

To build the ADT for Main core, use the ***autolinux*** as follows:

- Build ADT for the main core

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release/build-autolinux$ ./autolinux -c build</strong>
"<strong>meta-toolchain-telechips-qt5</strong>"</p>
<p>Loading cache: 100%
#####################################################################|
Time: 0:00:00</p>
<p>Loaded 1663 entries from dependency cache.</p>
<p>Parsing recipes: 100%
###################################################################|
Time: 0:00:00</p>
<p>Parsing of 1046 .bb files complete (1045 cached, 1 parsed). 1664
targets, 260 skipped, 0 masked, 0 errors.</p>
<p>NOTE: Resolving any missing task queue dependencies</p>
<p>Build Configuration:</p>
<p>BB_VERSION = "2.0.0"</p>
<p>BUILD_SYS = "x86_64-linux"</p>
<p>NATIVELSBSTRING = "universal"</p>
<p>TARGET_SYS = "aarch64-telechips-linux"</p>
<p>MACHINE = "tcc8070-main"</p>
<p>DISTRO = "poky-telechips-systemd"</p>
<p>DISTRO_VERSION = "4.0.17"</p>
<p>TUNE_FEATURES = "aarch64 armv8-2a cortexa76-cortexa55"</p>
<p>TARGET_FPU = ""</p>
<p>LINUX_VERSION = "5.10.205"</p>
<p>KBUILD_DEFCONFIG = "tcc807x_ivi_defconfig"</p>
<p>IMAGE_FEATURES = " debug-tweaks read-only-rootfs"</p>
<p>GCCVERSION = "arm-11.2"</p>
<p>GLIBCVERSION = "2.35%"</p>
<p>INVITE_PLATFORM = " with-subcore multimedia support-4k-video
qt5/wayland micom fw-update genivi"</p>
<p>meta</p>
<p>meta-poky</p>
<p>...</p>
<p>...</p>
<p>Initialising tasks: 100%
|###############################################################| Time:
0:00:05</p>
<p>Sstate summary: Wanted 863 Found 266 Missed 597 Current 848 (30%
match, 65% complete)</p>
<p>NOTE: Executing Tasks</p>
<p>NOTE: Tasks Summary: Attempted 5442 tasks of which 3600 didn't need
to be rerun and all succeeded.</p>
<p>NOTE: Writing buildhistory</p>
<p>NOTE: Writing buildhistory took: 4 seconds</p>
</blockquote></td>
</tr>
</tbody>
</table>

When the build is successfully completed, the results come out in the
following location.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release/build-autolinux$ ls -1
build/tcc8070-main/tmp/deploy/sdk/</strong></p>
<p>LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa76-cortexa55-opengl-wayland-qt5-x86_64-gcc-arm-11.2.host.manifest</p>
<p>LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa76-cortexa55-opengl-wayland-qt5-x86_64-gcc-arm-11.2.sh</p>
<p>LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa76-cortexa55-opengl-wayland-qt5-x86_64-gcc-arm-11.2.target.manifest</p>
<p>LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa76-cortexa55-opengl-wayland-qt5-x86_64-gcc-arm-11.2.testdata.json</p>
</blockquote></td>
</tr>
</tbody>
</table>

- Build ADT for the sub-core

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release/build-autolinux$ ./autolinux -c build sub</strong>
"<strong>meta-toolchain-telechips-subcore</strong>"</p>
<p>Loading cache: 100%
#####################################################################|
Time: 0:00:00</p>
<p>Loaded 2052 entries from dependency cache.</p>
<p>NOTE: Resolving any missing task queue dependencies</p>
<p>Build Configuration:</p>
<p>BB_VERSION = "2.0.0"</p>
<p>BUILD_SYS = "x86_64-linux"</p>
<p>NATIVELSBSTRING = "universal"</p>
<p>TARGET_SYS = "aarch64-telechips-linux"</p>
<p>MACHINE = "tcc8070-sub"</p>
<p>DISTRO = "poky-telechips-systemd"</p>
<p>DISTRO_VERSION = "4.0.17"</p>
<p>TUNE_FEATURES = "aarch64 armv8-2a crypto cortexa55"</p>
<p>TARGET_FPU = ""</p>
<p>LINUX_VERSION = "5.10.205"</p>
<p>KBUILD_DEFCONFIG = "tcc807x_ivi_subcore_defconfig"</p>
<p>IMAGE_FEATURES = " debug-tweaks read-only-rootfs"</p>
<p>GCCVERSION = "arm-11.2"</p>
<p>GLIBCVERSION = "2.35%"</p>
<p>INVITE_PLATFORM = " qt5/eglfs micom fw-update"</p>
<p>SUBCORE_APPS = " rvc"</p>
<p>meta</p>
<p>meta-poky</p>
<p>...</p>
<p>...</p>
<p>Initialising tasks: 100%
|###############################################################| Time:
0:00:05</p>
<p>Sstate summary: Wanted 308 Local 257 Mirrors 0 Missed 51 Current 1224
(83% match, 96% complete)</p>
<p>Removing 19 stale sstate objects for arch tcc8050_sub: 100%
|#############################| Time: 0:00:01</p>
<p>Removing 24 stale sstate objects for arch cortexa53: 100%
|###############################| Time: 0:00:00</p>
<p>NOTE: Executing Tasks</p>
<p>NOTE: Tasks Summary: Attempted 3882 tasks of which 3743 didn't need
to be rerun and all succeeded.</p>
<p>NOTE: Writing buildhistory</p>
<p>NOTE: Writing buildhistory took: 5 seconds</p>
</blockquote></td>
</tr>
</tbody>
</table>

When the build is successfully completed, the results come out in the
following location.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release/build-autolinux$ ls -1
build/tcc8070-sub/tmp/deploy/sdk/</strong></p>
<p>LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa55-opengl-fbdev-subcore-x86_64-gcc-arm-11.2.host.manifest</p>
<p>LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa55-opengl-fbdev-subcore-x86_64-gcc-arm-11.2.sh</p>
<p>LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa55-opengl-fbdev-subcore-x86_64-gcc-arm-11.2.target.manifest</p>
<p>LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa55-opengl-fbdev-subcore-x86_64-gcc-arm-11.2.testdata.json</p>
</blockquote></td>
</tr>
</tbody>
</table>

#### Install ADT

Run the script to install ADT as follows.

**Note:** For building ADT, refer to Chapter 4.8.1.1.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;"><blockquote>
<p><strong>~/release$
./build-autolinux/build/tcc8070-main/tmp/deploy/sdk/LINUX_YP4.0_IVI_1.0.0-tcc807x-toolchain-cortexa76-cortexa55-opengl-wayland-qt5-x86_64-gcc-arm-11.2.sh</strong></p>
<p>Telechips Baseline (Poky/meta-telechips/meta-core) SDK installer
version nodistro.0</p>
<p>===================================================================================</p>
<p>Enter target directory for SDK (default: /usr/local/oecore-x86_64):
./adt</p>
<p>You are about to install the SDK to "/home/release/adt". Proceed
[Y/n]? Y</p>
<p>Extracting SDK..............................................done</p>
<p>Setting it up...done</p>
<p>SDK has been successfully set up and is ready to be used.</p>
<p>Each time you wish to use the SDK in a new shell session, you need to
source the environment setup script e.g.</p>
<p>$ .
/home/release/adt/environment-setup-cortexa76-cortexa55-telechips-linux</p>
<p>~/release$</p>
</blockquote></td>
</tr>
</tbody>
</table>

#### ADT Setting

Set to ADT build environment.

You can use **echo \$CC** to check whether your current environment is
ADT.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release$ source
adt/environment-setup-cortexa76-cortexa55-telechips-linux</strong></p>
<p><strong>~/release$ echo $CC</strong></p>
<p>aarch64-telechips-linux-gcc -mcpu=cortex-a76.cortex-a55
-march=armv8.2-a -fstack-protector-strong -fPIE -pie -O2
-D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security
-fPIC
--sysroot=/home/release/adt/sysroots/cortexa76-cortexa55-telechips-linux</p>
</blockquote></td>
</tr>
</tbody>
</table>

#### Conduct Cross Compile by using ADT

You can use ADT to easily conduct cross complication as follows:

- Single File Exercise

  If the project source is in one file, conduct cross complication by
  using **\$CC** as follows:

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release$ $CC -o hello hello.c</strong></p>
</blockquote></td>
</tr>
</tbody>
</table>

- Exercise based on Makefile

  If the project is based on a Makefile, do not define the **AR**,
  **CC**, **CXX**, and **LD** variables in the Makefile.

  Environment variables that are already defined in ADT should not be
  redefined in Makefile.

- Exercise based on ***Autotools***

  If project is based on ***Autotools***, use **\$CONFIGURE_FLAGS** as
  follows:

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release$ aclocal</strong></p>
<p><strong>~/release$ autoheader</strong></p>
<p><strong>~/release$ autoconf</strong></p>
<p><strong>~/release$ automake -a</strong></p>
<p><strong>~/release$ ./configure $CONFIGURE_FLAGS</strong></p>
<p><strong>~/release$ make</strong></p>
</blockquote></td>
</tr>
</tbody>
</table>

### Use Extensible SDK (eSDK)

The eSDK provided by Telechips supports the Cross Compile environment
based on **sysroot**, recipes, ***devtool***, built images, and build
information.

#### Build eSDK

Yocto Project supports extensible SDK (eSDK), which allows the
followings:

- Adding new applications and libraries to an image easily

- Modifying the source code of an existing component

- Testing changes on the target hardware

**Important:** To use eSDK, the host GCC version must be 7.5 or higher.

Autolinux Configuration

Execute ***autolinux*** build environment in the Yocto project
environment as described in Chapter 4.6.2.4.

**Note:** If this step is already done, you can skip this chapter.

Build eSDK

To build the eSDK, use the ***autolinux*** as follows:

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release/build-autolinux$ ./autolinux -c build
"automotive-linux-platform-image -c populate_sdk_ext"</strong></p>
<p>Loading cache: 100%
#####################################################################|
Time: 0:00:00</p>
<p>Loaded 1663 entries from dependency cache.</p>
<p>Parsing recipes: 100%
###################################################################|
Time: 0:00:00</p>
<p>Parsing of 1046 .bb files complete (1045 cached, 1 parsed). 1664
targets, 260 skipped, 0 masked, 0 errors.</p>
<p>NOTE: Resolving any missing task queue dependencies</p>
<p>Build Configuration:</p>
<p>BB_VERSION = "2.0.0"</p>
<p>BUILD_SYS = "x86_64-linux"</p>
<p>NATIVELSBSTRING = "universal"</p>
<p>TARGET_SYS = "aarch64-telechips-linux"</p>
<p>MACHINE = "tcc8070-main"</p>
<p>DISTRO = "poky-telechips-systemd"</p>
<p>DISTRO_VERSION = "4.0.17"</p>
<p>TUNE_FEATURES = "aarch64 armv8-2a cortexa76-cortexa55"</p>
<p>TARGET_FPU = ""</p>
<p>LINUX_VERSION = "5.10.205"</p>
<p>KBUILD_DEFCONFIG = "tcc807x_ivi_defconfig"</p>
<p>IMAGE_FEATURES = " debug-tweaks read-only-rootfs"</p>
<p>GCCVERSION = "arm-11.2"</p>
<p>GLIBCVERSION = "2.35%"</p>
<p>INVITE_PLATFORM = " with-subcore multimedia support-4k-video
qt5/wayland micom fw-update genivi"</p>
<p>meta</p>
<p>meta-poky</p>
<p>...</p>
<p>...</p>
<p>Initialising tasks: 100%
|###############################################################| Time:
0:00:05</p>
<p>Sstate summary: Wanted 863 Found 266 Missed 597 Current 848 (30%
match, 65% complete)</p>
<p>NOTE: Executing Tasks</p>
<p>NOTE: Tasks Summary: Attempted 5442 tasks of which 3600 didn't need
to be rerun and all succeeded.</p>
<p>NOTE: Writing buildhistory</p>
<p>NOTE: Writing buildhistory took: 4 seconds</p>
</blockquote></td>
</tr>
</tbody>
</table>

**  
**

When the build is successfully completed, the results come out in the
following location.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p><strong>~/release/build-autolinux$ ls -1
build/tcc8070-main/tmp/deploy/sdk/</strong></p>
<p>poky-telechips-systemd-glibc-x86_64-automotive-linux-platform-image-cortexa76-cortexa55-toolchain-ext-nodistro.0.host.manifest</p>
<p>poky-telechips-systemd-glibc-x86_64-automotive-linux-platform-image-cortexa76-cortexa55-toolchain-ext-nodistro.0.sh</p>
<p>poky-telechips-systemd-glibc-x86_64-automotive-linux-platform-image-cortexa76-cortexa55-toolchain-ext-nodistro.0.target.manifest</p>
<p>poky-telechips-systemd-glibc-x86_64-automotive-linux-platform-image-cortexa76-cortexa55-toolchain-ext-nodistro.0.testdata.json</p>
<p>x86_64-buildtools-nativesdk-standalone-4.0.17.host.manifest</p>
<p>x86_64-buildtools-nativesdk-standalone-4.0.17.sh</p>
<p>x86_64-buildtools-nativesdk-standalone-4.0.17.target.manifest</p>
<p>x86_64-buildtools-nativesdk-standalone-4.0.17.testdata.json</p>
</blockquote></td>
</tr>
</tbody>
</table>

#### Install eSDK

Execute the following script to install eSDK. For building eSDK, refer
to Chapter 4.8.2.1.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;"><blockquote>
<p><strong>~/eSDK$
./poky-telechips-systemd-glibc-x86_64-automotive-linux-platform-image-cortexa76-cortexa55-toolchain-ext-nodistro.0.sh</strong></p>
<p>Telechips Baseline (Poky/meta-telechips/meta-core) Extensible SDK
installer version nodistro.0</p>
<p>==============================================================================================</p>
<p>Enter target directory for SDK (default:
~/poky-telechips-systemd_sdk): ./maincore</p>
<p>You are about to install the SDK to "/home/eSDK/maincore". Proceed
[Y/n]? Y</p>
<p>Extracting
SDK........................................................................................done</p>
<p>Setting it up...</p>
<p>Extracting buildtools...</p>
<p>Preparing build system...</p>
<p>~/eSDK$ ls maincore/</p>
<p>bitbake-cookerdaemon.log</p>
<p>buildtools/</p>
<p>cache/</p>
<p>conf/</p>
<p>downloads/</p>
<p>environment-setup-cortexa76-cortexa55-telechips-linux</p>
<p>layers/</p>
<p>preparing_build_system.log</p>
<p>site-config-cortexa76-cortexa55-telechips-linux</p>
<p>sstate-cache/</p>
<p>sysroots/</p>
<p>tmp/</p>
<p>version-cortexa76-cortexa55-telechips-linux</p>
<p>workspace/</p>
</blockquote></td>
</tr>
</tbody>
</table>

The important directories and files included in the eSDK are as follows:

- **buildtools:** Tools to configure the build environment of Yocto
  Project for the Linux_YP4.0_IVI

- **conf:** Directory that contains user configuration files such as
  “local.conf” and “bblayers.conf”

- **downloads:** Directory that contains the downloaded files

- **environment-setup-cortexa76-cortexa55-telechips-linux:** Script file
  to set eSDK environment

- **layers:** Directory that contains recipes, patches, configuration
  files, and so on that are required for building the eSDK

- **sstate-cache:** Directory that contains prebuilt cache

- **workspace:** Directory that contains recipes and source code in
  working

#### Build Application

Yocto project supports ***devtool*** that provides the several features
for developer. Refer to Chapter 4.7.3 to modify source code.

### Copy Application File to Board via USB

**{Storage_Path}** depends on the build option (UFS mode or not) and the
number of connected storages.

Check and use the path set when connecting storage. (**Example**:
/run/media/sda1)

#### Connect to Main Core

1.  Connect USB storage to USB3.0 Host or USB2.0 DRD port.

<!-- -->

5.  When copying the application file to root folder, run the following
    **copy** command:

    - **root@telechips-MACHINE:~# cp {Storage_Path}/user_file .**

6.  If the copied path has authority of read-only, you need to run the
    following **remount** and **copy** commands.

    - **root@telechips-MACHINE:~# mount -o remount,rw /**

    - **root@telechips-MACHINE:~# cp {Storage_Path}/user_file .**

#### Connect to Sub-core

1.  Connect USB storage to USB2.0 Host port.

<!-- -->

7.  When copying the application file to root folder, run the following
    **copy** command.

    - **root@telechips-MACHINE:~# cp {Storage_Path}/user_file .**

8.  If the copied path has authority of read-only, you need to run the
    following **remount** and **copy** commands.

    - **root@telechips-MACHINE:~# mount -o remount,rw /**

    - **root@telechips-MACHINE:~# cp {Storage_Path}/user_file .**

# Firmware Downloader (FWDN) Guide

This chapter describes how to download the Linux_YP4.0_IVI to TCC805x
Evaluation Board (EVB) and to log in the Linux console.

For more information on how to use the tools for ***Firmware
Downloader***, refer to the following documents.

- **FWDN V8**: “*TCCxxxx Common-User Guide for Firmware Downloader V8*”
  \[8\]

- **mktcimg**: “*TC Common-User Guide for mktcimg*” \[10\]

The ***FWDN V8*** is a PC tool for downloading firmware in Windows 10
64-bit and Linux environments.

This chapter describes the case of downloading in Windows environment.
For Linux, refer to "*TCCxxxx Common-User Guide for Firmware Downloader
V8*”. \[8\]

## System Requirement

### Software Requirement

<table>
<caption><p><span id="_Ref143248365" class="anchor"></span>Table 5.1
Software Requirement</p></caption>
<colgroup>
<col style="width: 14%" />
<col style="width: 40%" />
<col style="width: 17%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Category</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
<th style="text-align: center;"><strong>Path</strong></th>
<th style="text-align: center;"><strong>Note</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">VTC Driver</td>
<td><blockquote>
<p>Driver for Windows PC that is used to download Linux_YP4.0_IVI
firmware.</p>
<p>VTC driver corresponding to the Windows version must be
installed.</p>
<p>It is installed only once on your PC.</p>
</blockquote></td>
<td style="text-align: center;">fwdn_v8/out/vtcdrv v5.0.0.14.zip</td>
<td><blockquote>
<p>V5.0.0.14 or higher is strongly recommended.</p>
<p>Refer to VTC Driver information path:</p>
</blockquote>
<ul>
<li><p>"ReadMe.txt" in vtcdrv v5.0.0.14.zip</p></li>
</ul></td>
</tr>
<tr>
<td style="text-align: center;">FWDN</td>
<td><blockquote>
<p>Tools for downloading Linux_YP4.0_IVI firmware</p>
</blockquote></td>
<td style="text-align: center;"><p>fwdn_v8/out/fwdn</p>
<p>or</p>
<p>fwdn_v8/out/fwdn.exe</p></td>
<td><blockquote>
<p>You must use <em><strong>FWDN V8</strong></em>.</p>
</blockquote></td>
</tr>
</tbody>
</table>

### Hardware Requirement

<table>
<caption><p><span id="_Ref143248373" class="anchor"></span>Table 5.2
Hardware Requirement</p></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 40%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Category</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
<th style="text-align: center;"><strong>Note</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Demo Board</td>
<td><blockquote>
<p>Supported chipsets are TCC807x.</p>
</blockquote></td>
<td style="text-align: center;"><blockquote>
<p>-</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">Power Adapter</td>
<td><blockquote>
<p>12V power adapter is used to supply power to the board and LCD.</p>
</blockquote></td>
<td style="text-align: center;"><blockquote>
<p>Recommend using the power adapter (12V) provided by Telechips.</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">USB Cable</td>
<td><blockquote>
<p>It is used to connect a demo board to PC.</p>
</blockquote></td>
<td style="text-align: center;"><blockquote>
<p>Refer to Chapter 2.2.1 for USB cable connection.</p>
</blockquote></td>
</tr>
</tbody>
</table>

## Linux_YP4.0_IVI Firmware Construction

Note: If you have already built the SDK following Chapter 4.6.2.5 and
have created “SD_Data.fai”, you can skip this chapter.

<table>
<caption><p><span id="_Ref143248405" class="anchor"></span>Table 5.3
Linux_YP4.0_IVI Firmware Construction</p></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Image Type</strong></th>
<th style="text-align: center;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><p>U-Boot<br />
boot loader Image</p>
<p>(*.rom)</p></td>
<td style="text-align: left;"><blockquote>
<p>Image to initialize the system hardware and put the Linux kernel
image into memory for execution</p>
<p>Refer to the following example for the U-Boot image names used in
each core.</p>
<p>Main core: ap0_bl3.rom</p>
<p>Sub-core: ap1_bl3.rom</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;"><p>Kernel Image</p>
<p>(*.img)</p></td>
<td style="text-align: left;"><blockquote>
<p>Boot image file in which the Linux kernel is compressed</p>
<p>Refer to the following example for the Kernel image names used in
each board.</p>
<p><strong>Example:</strong></p>
<p>tc-boot-[MACHINE].img</p>
<p>Main core: tc-boot-tcc8070-main.img</p>
<p>Sub-core: tc-boot-tcc8070-sub.img</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;"><p>Root File System Image</p>
<p>(*.ext4)</p></td>
<td style="text-align: left;"><blockquote>
<p>Image that is served as the root file system for Linux system</p>
<p>Refer to the following example for the root file system image names
used in each machine.</p>
<p>By default, the generated Root File System Image is read-only.</p>
<p><strong>Example:</strong></p>
<p>Main core: automotive-linux-platform-image-[MACHINE].ext4</p>
</blockquote>
<p>automotive-linux-platform-image-tcc8070-main.ext4</p>
<blockquote>
<p>Sub-core: telechips-ivi-subcore-image-[MACHINE].ext4</p>
<p>telechips-ivi-subcore-image-tcc8070-sub.ext4</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;"><p>RW Partition Image</p>
<p>(Home directory)</p>
<p>(*.ext4)</p></td>
<td style="text-align: left;"><blockquote>
<p>It is used to store the RW data of the database and application used
in Media Player as the RW area required by Linux_YP4.0_IVI.</p>
<p><strong>Example:</strong> home-directory.ext4</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">Device Tree Binary (DTB) Image<br />
(*.dtb)</td>
<td style="text-align: left;"><blockquote>
<p>Image that contains driver information on the hardware devices of
each board</p>
<p>Refer to the following example for the dtb image names used in each
core.</p>
<p><strong>Example:</strong></p>
<p>Main core: [chip_name]-ivi-[board_name].dtb</p>
</blockquote>
<p>tcc8070-ivi-lpd4x322.dtb</p>
<blockquote>
<p>Sub-core: [chip_name]-ivi-subcore-[board_name].dtb</p>
</blockquote>
<p>tcc8070-ivi-subcore-lpd4x322.dtb</p></td>
</tr>
<tr>
<td style="text-align: center;"><p>SNOR Image</p>
<p>(*.rom)</p></td>
<td style="text-align: left;"><blockquote>
<p>This image contains SNOR firmware image.</p>
<p>SNOR image uses prebuilt image. Refer to the following example for
the SNOR image.</p>
<p><strong>Example:</strong> tcc807x_snor.rom</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">bconf.bin</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of the configuration information for the chipboot
code and the boot firmware such as BL1/2 and SC F/W</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">ap0_bl1.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of trusted-firmware BL1 for CA76</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">ap0_bl2.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of trusted-firmware BL2 for CA76</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">ap0_lib.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of DRAM initialization code used by trusted-firmware
BL1 for CA76</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">ap1_bl1.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of trusted-firmware BL1 for CA55</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">ap1_bl2.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of trusted-firmware BL2 for CA55</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">ap1_lib.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of DRAM initialization code used by trusted-firmware
BL1 for CA55</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">dram_params.bin</td>
<td style="text-align: left;"><blockquote>
<p>This is the DRAM parameter information data used during
initialization of DRAM</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">fwdn.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of firmware that runs in Safety Island Controller
(SIG) to use <em><strong>FWDN</strong></em>.</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">hsm.bin</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of firmware that runs in Hardware Security Module
(HSM).</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">mcert.bin</td>
<td style="text-align: left;"><blockquote>
<p>This is the image where the master key for Secure Boot is stored.</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">optee.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of Trusted Environment Execution (TEE) OS for
CA76.</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">subcore_optee.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of Trusted Environment Execution (TEE) OS for
CA55</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">tcc807x_snor.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image to initialize the system hardware and execute the
main firmware of SIC image.</p>
</blockquote></td>
</tr>
<tr>
<td style="text-align: center;">scfw.rom</td>
<td style="text-align: left;"><blockquote>
<p>This is an image of storage core firmware.</p>
</blockquote></td>
</tr>
</tbody>
</table>

**Note 1:** Use Linux **dd** command to create RW file system for home
directory image:

- **\$ dd if=/dev/zero of=home-directory.ext4 bs=1K count=512000**

- **Case of eMMC:  
  \$ mkfs.ext4 home-directory.ext4  
  Case of UFS:  
  \$ mkfs.ext4 -b 4096 home-directory.ext4**

**Note 2:**

- chip_name = tcc8070

- MACHINE = \[chip_name\]-main or sub

**Example**: tcc8070-main, tcc8070-sub

- board_name = lpd4x322

### Boot-firmware

Linux_YP4.0_IVI requires “fwdn.rom”, HSM, trusted firmware-A, and
storage core firmware. These files are included in the boot-firmware.
You can get the boot-firmware from SDK.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>$ ls -1 boot-firmware_tcc807x/prebuilt/</p>
<p>ap0_bl1.rom</p>
<p>ap0_bl2.rom</p>
<p>ap0_lib.rom</p>
<p>ap1_bl1.rom</p>
<p>ap1_bl2.rom</p>
<p>ap1_lib.rom</p>
<p>bconf.bin</p>
<p>dram_params.bin</p>
<p>fwdn.rom</p>
<p>hsm.bin</p>
<p>mcert.bin</p>
<p>mxic_mx25l25645g.bin</p>
<p>optee.rom</p>
<p>scfw.rom</p>
<p>sic-fw.rom</p>
<p>snor_read_3b.bin</p>
<p>subcore_optee.rom</p>
<p>tcc807x_snor.rom</p>
<p>ufs/</p>
</blockquote></td>
</tr>
</tbody>
</table>

#### Make bconf.bin

**Note:** You should make “bconf.bin” according to **boot option**.

1.  Go to the boot-firmware that you downloaded.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>$ cd boot-firmware_tcc807x/</p>
</blockquote></td>
</tr>
</tbody>
</table>

9.  Edit “tcc807x_bconf.xml”.

- **Example 1**: For single boot, change the **bootsel** to **single**.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>$ vi tools/bconf_maker/tcc807x_bconf.xml</p>
<p>&lt;!--</p>
<p>** boot option</p>
<p>bootsel</p>
<p>- dual: boot with main/sub cores</p>
<p>- single: boot with main core only</p>
<p>imgmaptype</p>
<p>- 0: BL3 image in user, OPTEE image in boot part</p>
<p>- 1: BL3 image/OPTEE image in boot part</p>
<p>- 2: BL3 image in boot part, OPTEE image in user</p>
<p>mainsys</p>
<p>- main: main cluster is the main system, init dram</p>
<p>- sub: sub-cluster is the main system, init dram</p>
<p>--&gt;</p>
<p>&lt;bootconfig bootsel="<strong>single</strong>" imgmaptype="0"
mainsys="main"/</p>
</blockquote></td>
</tr>
</tbody>
</table>

**  
**

- **Example 2**: For STR feature, change the IPC configuration.

**Important:** This configuration value is essential for using the
Telechips EVB/VCP module. You must configure it as follows according to
your hardware configuration.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><blockquote>
<p>$ vi tools/bconf_maker/tcc807x_bconf.xml</p>
<p>&lt;!--</p>
<p>** AP-MCU IPC configuration</p>
<p>device</p>
<p>- none</p>
<p>- uart</p>
<p>- gpsb</p>
<p>port: port number for UART or GPSB</p>
<p>*** device configuration for uart</p>
<p>baudrate: UART baud rate (max: 115200)</p>
<p>*** device configuration for gpsb</p>
<p>reg: SPI start request pin gpio group register offset</p>
<p>pin: SPI start request pin num</p>
<p>--&gt;</p>
<p>&lt;ipc device="gpsb" port="39" reg="0x740" pin="21"/&gt;</p>
</blockquote></td>
</tr>
</tbody>
</table>

10. Make “bconf.bin”.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;"><blockquote>
<p>$ python tools/bconf_maker/bconf_maker_v01.py -c
tools/bconf_maker/tcc807x_bconf.xml -o prebuilt/bconf.bin</p>
</blockquote></td>
</tr>
</tbody>
</table>

### Make SD Data using make_fai

#### Check Device Information

Before creating the fai file, it must be created according to the
customer's eMMC Capacity or UFS Capacity.

1.  Connect ***FWDN V8*** to the board.

<!-- -->

11. Check User capacity in eMMC Info or LUN2 (User) capacity in UFS
    Info.

**Note:** To connect ***FWDN V8*** to the board, refer to Chapter 5.4.3.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p>fwdn&gt; <a
href="https://wiki.telechips.com:8443/display/A2/fwdn.exe">fwdn.exe</a> --fwdn
...\boot-firmware\fwdn.json</p>
<p>...</p>
<p>...</p>
<p>fwdn&gt; fwdn.exe --device-info</p>
<p>[main:30] FWDN V8 v1.4.12 - 2023.6.22 11:23:58</p>
<p>[FWDN_V8::GetFWDNRomVersion:1588] fwdn.rom version : 23.5.22</p>
<p>[FWDN_V8::PrintDeviceInfo:1201] --------------Device
info-------------</p>
<p>[FWDN_V8::PrintDeviceInfo:1202]</p>
<p>----- Detail of Storages -----</p>
<p>#### eMMC Info ####</p>
<p>Manufacture ID: 0x11</p>
<p>OEM: 0x100</p>
<p>Name: 008GB</p>
<p>User Capacity: 7.3 GiB (7818182656 Byte)</p>
<p>Boot Capacity: 8 MiB (8388608 Byte)</p>
<p>RPMB Capacity: 4 MiB (4194304 Byte)</p>
<p>Speed Mode: HS200</p>
<p>#### SNOR Info ####</p>
<p>Manufacture ID: 0xc2</p>
<p>Device ID: 0x2019</p>
<p>Name: MXIC-MX25L25645G</p>
<p>Sector Size: 4 KiB (4096 Byte)</p>
<p>Total Capacity: 32 MiB (33554432 Byte)</p>
<p>4Byte Address Mode: Supported</p>
<p>#### UFS Info ####</p>
<p>Vendor : TOSHIBA</p>
<p>Product : THGAFEG8T10100</p>
<p>Revision : 0100</p>
<p>bSecureRemovalType : 3</p>
<p>LUN0(Boot) Capcity: 8 MiB(8388608 Byte)</p>
<p>LUN0(Boot) bProvisioningType = 3</p>
<p>LUN1(Boot) Capcity: 8 MiB(8388608 Byte)</p>
<p>LUN1(Boot) bProvisioningType = 3</p>
<p>LUN2(User) Capcity: 29.8 GiB(31998345216 Byte)</p>
<p>LUN2(Boot) bProvisioningType = 3</p>
<p>Total Capacity: 29.8 GiB(32015122432 Byte)</p>
<p>----- Summary of Storages -----</p>
<p>eMMC : O</p>
<p>SNOR : O</p>
<p>UFS : O</p>
<p>- O : Init success</p>
<p>- X : Init failed or not exist</p>
<p>----- Summary of DRAM Init -----</p>
<p>DRAM Init : Success (Result 0x0 )</p>
<p>DRAM Size : 8192MB</p>
<p>[FWDN_V8::PrintDeviceInfo:1203]
--------------------------------------</p>
<p>[main:156] Complete FWDN</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

**Note:** The Byte capacity of User capacity is written as
eMMC_storage_size (Byte), and the LUN2 (User) capacity is written as
UFS_storage_size (Byte).

#### Create SD Data with eMMC/UFS size

Add the confirmed eMMc or UFS capacity (Byte) to **STORAGE_SIZE** in
local.conf.

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;"><blockquote>
<p>~/release/build-autolinux$ vi build/tcc8070-main/conf/local.conf</p>
<p>In case of eMMC,</p>
<p># Storage Size</p>
<p># Set STORAGE_SIZE variable according to the storage size you are
using</p>
<p>STORAGE_SIZE = "7818182656"</p>
<p>In case of UFS,</p>
<p># Storage Size</p>
<p># Set STORAGE_SIZE variable according to the storage size you are
using</p>
<p>STORAGE_SIZE = "31998345216"</p>
</blockquote></td>
</tr>
</tbody>
</table>

|                                                  |
|--------------------------------------------------|
| ~/release/build-autolinux\$ ./autolinux -c build |

After adding eMMC size, Makes SD Data and “partition.list” based on the
contents of “make_fai.bbclass”.

**Note:** Class files are used to abstract common functionality and
share it amongst multiple recipe (.bb) files. To use a class file, the
recipe should inherit the class.

|                                                     |
|-----------------------------------------------------|
| ~/release/build-autolinux\$ ./autolinux -c make_fai |

#### Partition Information of SD Data

**Type 1**: With meta-update (default)

<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 23%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>FWDN<br />
Partition</strong></th>
<th style="text-align: center;"><strong>Size<br />
(KB)</strong></th>
<th style="text-align: center;"><strong>Label Name</strong></th>
<th style="text-align: center;"><p><strong>Block Device</strong></p>
<p><strong>(eMMC)</strong></p></th>
<th style="text-align: center;"><strong>Description</strong></th>
<th style="text-align: center;"><strong>File Name</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Partition 1</td>
<td style="text-align: center;">2048</td>
<td style="text-align: center;">bl3_ap0_a</td>
<td style="text-align: center;">mmcblk0p1</td>
<td>Main Core Boot Loader A</td>
<td style="text-align: center;">ap0_bl3.rom</td>
</tr>
<tr>
<td style="text-align: center;">Partition 2</td>
<td style="text-align: center;">2048</td>
<td style="text-align: center;">bl3_ap0_b</td>
<td style="text-align: center;">mmcblk0p2</td>
<td>Main Core Boot Loader B</td>
<td style="text-align: center;">ap0_bl3.rom</td>
</tr>
<tr>
<td style="text-align: center;">Partition 3</td>
<td style="text-align: center;">40960</td>
<td style="text-align: center;">boot_a</td>
<td style="text-align: center;">mmcblk0p3</td>
<td>Kernel image A</td>
<td style="text-align: center;">tc-boot-[MACHINE].img</td>
</tr>
<tr>
<td style="text-align: center;">Partition 4</td>
<td style="text-align: center;">40960</td>
<td style="text-align: center;">boot_b</td>
<td style="text-align: center;">mmcblk0p4</td>
<td>Kernel image B</td>
<td style="text-align: center;">tc-boot-[MACHINE].img</td>
</tr>
<tr>
<td style="text-align: center;">Partition 5</td>
<td style="text-align: center;">Customized</td>
<td style="text-align: center;">system_a</td>
<td style="text-align: center;">mmcblk0p5</td>
<td>Root file system A</td>
<td
style="text-align: center;">automotive-linux-platform-image-[MACHINE].ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 6</td>
<td style="text-align: center;">Customized</td>
<td style="text-align: center;">system_b</td>
<td style="text-align: center;">mmcblk0p6</td>
<td>Root file system B</td>
<td
style="text-align: center;">automotive-linux-platform-image-[MACHINE].ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 7</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">dtb_a</td>
<td style="text-align: center;">mmcblk0p7</td>
<td>Device tree A</td>
<td style="text-align: center;">[chip_name]-ivi-[board_name].dtb</td>
</tr>
<tr>
<td style="text-align: center;">Partition 8</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">dtb_b</td>
<td style="text-align: center;">mmcblk0p8</td>
<td>Device tree B</td>
<td style="text-align: center;">[chip_name]-ivi-[board_name].dtb</td>
</tr>
<tr>
<td style="text-align: center;">Partition 9</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">env</td>
<td style="text-align: center;">mmcblk0p9</td>
<td>Environment</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 10</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">misc</td>
<td style="text-align: center;">mmcblk0p10</td>
<td>Miscellaneous</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 11</td>
<td style="text-align: center;">40960</td>
<td style="text-align: center;">splash</td>
<td style="text-align: center;">mmcblk0p11</td>
<td>Splash</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 12</td>
<td style="text-align: center;">512000</td>
<td style="text-align: center;">home</td>
<td style="text-align: center;">mmcblk0p12</td>
<td>RW file system for home directory</td>
<td style="text-align: center;">home-directory.ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 13</td>
<td style="text-align: center;">2048</td>
<td style="text-align: center;">bl3_ap1_a</td>
<td style="text-align: center;">mmcblk0p13</td>
<td><p>Sub-core Boot Loader A</p>
<p>(optional)</p></td>
<td style="text-align: center;">ap1_bl3.rom</td>
</tr>
<tr>
<td style="text-align: center;">Partition 14</td>
<td style="text-align: center;">2048</td>
<td style="text-align: center;">bl3_ap1_b</td>
<td style="text-align: center;">mmcblk0p14</td>
<td><p>Sub-core Boot Loader B</p>
<p>(optional)</p></td>
<td style="text-align: center;">ap1_bl3.rom</td>
</tr>
<tr>
<td style="text-align: center;">Partition 15</td>
<td style="text-align: center;">40960</td>
<td style="text-align: center;">subcore_boot_a</td>
<td style="text-align: center;">mmcblk0p15</td>
<td><p>Sub-core Kernel Image A</p>
<p>(optional)</p></td>
<td style="text-align: center;">tc-boot-[MACHINE].img</td>
</tr>
<tr>
<td style="text-align: center;">Partition 16</td>
<td style="text-align: center;">40960</td>
<td style="text-align: center;">subcore_boot_b</td>
<td style="text-align: center;">mmcblk0p16</td>
<td><p>Sub-core Kernel Image B</p>
<p>(optional)</p></td>
<td style="text-align: center;">tc-boot-[MACHINE].img</td>
</tr>
<tr>
<td style="text-align: center;">Partition 17</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">subcore_dtb_a</td>
<td style="text-align: center;">mmcblk0p17</td>
<td><p>Sub-core Device tree A</p>
<p>(optional)</p></td>
<td
style="text-align: center;">[chip_name]-ivi-subcore-[board_name].dtb</td>
</tr>
<tr>
<td style="text-align: center;">Partition 18</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">subcore_dtb_b</td>
<td style="text-align: center;">mmcblk0p18</td>
<td><p>Sub-core Device tree B</p>
<p>(optional)</p></td>
<td
style="text-align: center;">[chip_name]-ivi-subcore-[board_name].dtb</td>
</tr>
<tr>
<td style="text-align: center;">Partition 19</td>
<td style="text-align: center;">Customized</td>
<td style="text-align: center;">subcore_root_a</td>
<td style="text-align: center;">mmcblk0p19</td>
<td><p>Sub-core root file system A</p>
<p>(optional)</p></td>
<td
style="text-align: center;">telechips-ivi-subcore-image-[MACHINE].ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 20</td>
<td style="text-align: center;">Customized</td>
<td style="text-align: center;">subcore_root_b</td>
<td style="text-align: center;">mmcblk0p20</td>
<td><p>Sub-core root file system B</p>
<p>(optional)</p></td>
<td
style="text-align: center;">telechips-ivi-subcore-image-[MACHINE].ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 21</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">subcore_env</td>
<td style="text-align: center;">mmcblk0p21</td>
<td><p>Sub-core Environment</p>
<p>(optional)</p></td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 22</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">subcore_misc</td>
<td style="text-align: center;">mmcblk0p22</td>
<td>Sub-core miscellaneous</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 23</td>
<td style="text-align: center;">Remainder</td>
<td style="text-align: center;">data</td>
<td style="text-align: center;">mmcblk0p23</td>
<td>User storage</td>
<td style="text-align: center;">user-data.ext4</td>
</tr>
</tbody>
</table>

**Type 2**: Without meta-update

<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 23%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>FWDN<br />
Partition</strong></th>
<th style="text-align: center;"><strong>Size<br />
(KB)</strong></th>
<th style="text-align: center;"><strong>Label Name</strong></th>
<th style="text-align: center;"><p><strong>Block Device</strong></p>
<p><strong>(eMMC)</strong></p></th>
<th style="text-align: center;"><strong>Description</strong></th>
<th style="text-align: center;"><strong>File Name</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Partition 1</td>
<td style="text-align: center;">2048</td>
<td style="text-align: center;">bl3_ap0_a</td>
<td style="text-align: center;">mmcblk0p1</td>
<td>Main Core Boot Loader A</td>
<td style="text-align: center;">ap0_bl3.rom</td>
</tr>
<tr>
<td style="text-align: center;">Partition 2</td>
<td style="text-align: center;">2048</td>
<td style="text-align: center;">bl3_ap0_b</td>
<td style="text-align: center;">mmcblk0p2</td>
<td>Main Core Boot Loader B</td>
<td style="text-align: center;">ap0_bl3.rom</td>
</tr>
<tr>
<td style="text-align: center;">Partition 3</td>
<td style="text-align: center;">40960</td>
<td style="text-align: center;">boot_a</td>
<td style="text-align: center;">mmcblk0p3</td>
<td>Kernel image A</td>
<td style="text-align: center;">tc-boot-[MACHINE].img</td>
</tr>
<tr>
<td style="text-align: center;">Partition 4</td>
<td style="text-align: center;">Customized</td>
<td style="text-align: center;">system_a</td>
<td style="text-align: center;">mmcblk0p4</td>
<td>Root file system B</td>
<td
style="text-align: center;">automotive-linux-platform-image-[MACHINE].ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 5</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">dtb_a</td>
<td style="text-align: center;">mmcblk0p5</td>
<td>Device tree A</td>
<td style="text-align: center;">[chip_name]-ivi-[board_name].dtb</td>
</tr>
<tr>
<td style="text-align: center;">Partition 6</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">misc</td>
<td style="text-align: center;">mmcblk0p6</td>
<td>Miscellaneous</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 7</td>
<td style="text-align: center;">40960</td>
<td style="text-align: center;">splash</td>
<td style="text-align: center;">mmcblk0p7</td>
<td>Splash</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 8</td>
<td style="text-align: center;">512000</td>
<td style="text-align: center;">home</td>
<td style="text-align: center;">mmcblk0p8</td>
<td>RW file system<br />
for home directory</td>
<td style="text-align: center;">home-directory.ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 9</td>
<td style="text-align: center;">2048</td>
<td style="text-align: center;">bl3_ap1_a</td>
<td style="text-align: center;">mmcblk0p9</td>
<td><p>Sub-core Boot Loader A</p>
<p>(optional)</p></td>
<td style="text-align: center;">ap1_bl3.rom</td>
</tr>
<tr>
<td style="text-align: center;">Partition 10</td>
<td style="text-align: center;">2048</td>
<td style="text-align: center;">bl3_ap1_a</td>
<td style="text-align: center;">mmcblk0p10</td>
<td><p>Sub-core Boot Loader B</p>
<p>(optional)</p></td>
<td style="text-align: center;">ap1_bl3.rom</td>
</tr>
<tr>
<td style="text-align: center;">Partition 11</td>
<td style="text-align: center;">40960</td>
<td style="text-align: center;">subcore_boot_a</td>
<td style="text-align: center;">mmcblk0p11</td>
<td><p>Sub-core Kernel Image A</p>
<p>(optional)</p></td>
<td style="text-align: center;">tc-boot-[MACHINE].img</td>
</tr>
<tr>
<td style="text-align: center;">Partition 12</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">subcore_dtb_a</td>
<td style="text-align: center;">mmcblk0p12</td>
<td><p>Sub-core Device tree B</p>
<p>(optional)</p></td>
<td
style="text-align: center;">[chip_name]-ivi-subcore-[board_name].dtb</td>
</tr>
<tr>
<td style="text-align: center;">Partition 13</td>
<td style="text-align: center;">Customized</td>
<td style="text-align: center;">subcore_root_a</td>
<td style="text-align: center;">mmcblk0p13</td>
<td><p>Sub-core root file system A</p>
<p>(optional)</p></td>
<td
style="text-align: center;">telechips-ivi-subcore-image-[MACHINE].ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 14</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">subcore_misc</td>
<td style="text-align: center;">mmcblk0p14</td>
<td>Sub-core miscellaneous</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 15</td>
<td style="text-align: center;">512000</td>
<td style="text-align: center;">home_Sub</td>
<td style="text-align: center;">mmcblk0p15</td>
<td>Sub-core RW file system for home directory</td>
<td style="text-align: center;">home-directory.ext4</td>
</tr>
<tr>
<td style="text-align: center;">Partition 16</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">subcore_env</td>
<td style="text-align: center;">mmcblk0p16</td>
<td><p>Sub-core Environment</p>
<p>(optional)</p></td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 17</td>
<td style="text-align: center;">1024</td>
<td style="text-align: center;">env</td>
<td style="text-align: center;">mmcblk0p17</td>
<td>Environment</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: center;">Partition 18</td>
<td style="text-align: center;">Remainder</td>
<td style="text-align: center;">data</td>
<td style="text-align: center;">mmcblk0p18</td>
<td>User storage</td>
<td style="text-align: center;">user-data.ext4</td>
</tr>
</tbody>
</table>

If you want to add or redefine a partition, follow the steps below and
re-make SD Data.

- Add Partition

The following example shows how to add a partition.

|  |
|----|
| ~/release/build-autolinux\$ vi poky/meta-telechips/meta-core/classes/make_fai_customer.bbclass |

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>inherit make_fai</p>
<p>make_plist_tcc807x:append() {</p>
<p><strong>echo "example:100M@" &gt;&gt;
${DEPLOY_DIR}/fwdn/partition.list$1</strong></p>
<p>}</p></td>
</tr>
</tbody>
</table>

|  |
|----|
| ~/release/build-autolinux\$ vi poky/meta-telechips/meta-core/classes/tcc-base-image.bbclass |

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>#</p>
<p># Copyright (C) Telechips Inc.</p>
<p>#</p>
<p>inherit core-image extrausers make_fai chk_security
<strong>make_fai_customer</strong></p>
<p>IMAGE_FSTYPES = "squashfs ext4"</p>
<p>...</p></td>
</tr>
</tbody>
</table>

- Redefine Partition

This example renames an existing partition to **rom_a** and **rom_b**.

|  |
|----|
| ~/release/build-autolinux\$ vi poky/meta-telechips/meta-core/classes/make_fai_customer.bbclass |

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>inherit make_fai</p>
<p>MAKE_PLIST = "make_plist_customer"</p>
<p>make_plist_customer() {</p>
<p><strong>echo "rom_a:2M@${DEPLOY_DIR}/images/${MACHINE}/ap0_bl3.rom$1"
&gt;&gt; ${DEPLOY_DIR}/fwdn/partition.list$1</strong></p>
<p><strong>echo "rom_b:2M@${DEPLOY_DIR}/images/${MACHINE}/ap0_bl3.rom$1"
&gt;&gt; ${DEPLOY_DIR}/fwdn/partition.list$1</strong></p>
<p>}</p></td>
</tr>
</tbody>
</table>

|  |
|----|
| ~/release/build-autolinux\$ vi poky/meta-telechips/meta-core/classes/tcc-base-image.bbclass |

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>#</p>
<p># Copyright (C) Telechips Inc.</p>
<p>#</p>
<p>inherit core-image extrausers make_fai chk_security
<strong>make_fai_customer</strong></p>
<p>IMAGE_FSTYPES = "squashfs ext4"</p>
<p>...</p></td>
</tr>
</tbody>
</table>

### Make SNOR ROM Image

Pre-built images are in the following path:

- “tcc8070_snor.rom” in boot-firmware_tcc807x/prebuilt

If you need to change the binary stored in the SNOR ROM, you must make a
new SNOR ROM image.

To make SNOR ROM image of TCC807x, use the ***snor_image_maker*** in
boot-firmware as follows:

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>$ cd boot-firmware-tcc807x/tools/snor_image_maker/</p>
<p>$ python3 snor_image_maker.py -c tcc807x_snor.json -o
../../prebuilt/tcc807x_snor.rom</p></td>
</tr>
</tbody>
</table>

The “tcc807x_snor.json” is a list of files with their offset address on
SNOR flash

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>{</p>
<p>"area0": {</p>
<p>".\\prebuilt\\mxic_mx25um51245g_OPI_100_DTR.bin" : [{"storage" :
"snor", "area" : "die1", "addr" : "0x00000000"}],</p>
<p>".\\prebuilt\\mcert.bin" : [{"storage" : "snor", "area" : "die1",
"addr" : "0x00000008"}],</p>
<p>".\\prebuilt\\hsm.bin" : [{"storage" : "snor", "area" : "die1",
"addr" : "0x00000010"}],</p>
<p>".\\prebuilt\\sic-fw.rom" : [{"storage" : "snor", "area" : "die1",
"addr" : "0x00000050"}]</p>
<p>},</p>
<p>"area1": {</p>
<p>".\\prebuilt\\mxic_mx25um51245g_OPI_100_DTR.bin" : [{"storage" :
"snor", "area" : "die1", "addr" : "0x00000450"}],</p>
<p>".\\prebuilt\\mcert.bin" : [{"storage" : "snor", "area" : "die1",
"addr" : "0x00000458"}],</p>
<p>".\\prebuilt\\hsm.bin" : [{"storage" : "snor", "area" : "die1",
"addr" : "0x000000460"}],</p>
<p>".\\prebuilt\\sic-fw.rom" : [{"storage" : "snor", "area" : "die1",
"addr" : "0x000004A0"}]</p>
<p>}</p>
<p>}</p></td>
</tr>
</tbody>
</table>

#### snor_conf_maker

SNOR ROM image contains configuration data that consists of SFMC
register information and SFMC instructions.

The configuration data is initially written in XML format and converted
to a binary file by the **snor_conf_maker** in boot-firmware as follows:

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr>
<td><p>$ cd boot-firmware/tools/snor_conf_maker</p>
<p>$ python3 snor_conf_maker.py -c mxic_mx25um51245g_OPI_100_DTR.xml -o
mxic_mx25um51245g_OPI_100_DTR.bin</p></td>
</tr>
</tbody>
</table>

**Important:** The distributed Linux_YP4.0_IVI_1.0.0 does not properly
support SNOR boot mode. To use SNOR boot mode, you need to apply a fix
patch, contact Telechips. \[1\]

**  
**

## Install VTC Driver

Install USB driver (VTC Driver V5.0.0.14) for ***FWDN*** on your Windows
PC. You only need to install this driver once.

<img src="media/image39.png" style="width:4.76522in;height:3.70628in" />

<span id="_Toc179788444" class="anchor"></span>Figure 5.1 VTC Driver
Installation Screen

Use the VTC driver V5.0.0.14 or higher. If you use previous version,
install the latest version.

To check the version, confirm the device manager in Windows environment.

The VTC driver installation file (vtcdrv v5.0.0.14.zip) is included in
***fwdn_v8/out*** in the SDK.

## Linux_YP4.0_IVI Firmware Download Sequence

The downloading sequence of ***FWDN*** is as follows:

1.  Set the boot mode switch to USB boot mode.

<!-- -->

1.  Connect 12V power adapter to board.

2.  Open Windows prompt or Linux console and test ***FWDN V8***.

3.  Connect ***FWDN V8*** to board.

4.  Execute **--low-format** command by using ***FWDN V8***.

5.  Download pre-built boot F/W image.

6.  Download images to SNOR for SIC.

7.  Download “.fai” file.

8.  Download Image to GPT Partition. (Optional)

9.  Set the boot mode switch (eMMC, SNOR/eMMC, UFS, or SNOR/UFS) and
    reset.

**Note 1:** ***FWDN V8*** runs in Windows 10 or Linux environment.

**Note 2:** Use ***FWDN V8*** v1.4.12 or higher.

### Set Board to USB Boot Mode

Refer to Chapter 2.2.1.

### Open Windows Prompt or Linux Console and Test FWDN V8

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th><p>fwdn&gt; <a
href="https://wiki.telechips.com:8443/display/A2/fwdn.exe">fwdn.exe</a> --help</p>
<p>[main:30] FWDN V8 v1.4.12 - 2023.6.22 11:23:58</p>
<p>Usage : fwdn &lt;command&gt; &lt;options&gt;</p>
<p>Example:</p>
<p>Start to fwdn(load FWDN F/W) :</p>
<p>fwdn --fwdn tcc805x_fwdn.json</p>
<p>Download files written to a config file :</p>
<p>fwdn --write tcc805x_boot.json</p>
<p>Download file :</p>
<p>fwdn -w [file name] -m emmc --area boot0</p>
<p>fwdn -w [file name] -m emmc --area boot1 -s 512</p>
<p>Download file at GPT partition:</p>
<p>fwdn -w [file name] -m emmc --area user --part boot</p>
<p>fwdn -w [file name] -m ufs --area user --part boot --sector-size
4096</p>
<p>Read dump :</p>
<p>fwdn -r [file name] -m emmc --area boot1 --size 0x100 --addr
0x123456</p>
<p>fwdn -r [file name] -m emmc --area boot1 --size 0x100</p>
<p>...</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

### Connect FWDN V8 to Board

| fwdn\> [fwdn.exe](https://wiki.telechips.com:8443/display/A2/fwdn.exe) --fwdn ...\boot-firmware\fwdn.json |
|----|

### Execute --low-format Command by Using FWDN V8 (Optional)

| fwdn\> [fwdn.exe](https://wiki.telechips.com:8443/display/A2/fwdn.exe) --storage emmc --low-format |
|----|

**Note:** This task is optional. If this task is not required, you can
skip this chapter.

### Download Pre-built F/W Image

| fwdn\> [fwdn.exe](https://wiki.telechips.com:8443/display/A2/fwdn.exe) -w ...\boot-firmware\boot.json |
|----|

### Download Images to SNOR for SIC

| fwdn\> fwdn.exe --write ...\prebuilt\tcc807x_snor.rom --area die1 --storage snor |
|----|

### Download “.FAI” File

Depending on the storage, you should use different option as follows:

- eMMC: **--storage emmc**

| fwdn\> [fwdn.exe](https://wiki.telechips.com:8443/display/A2/fwdn.exe) -w ...\SD_Data.fai --storage emmc --area user |
|----|

- UFS: **--storage ufs --sector-size 4096**

| fwdn\> [fwdn.exe](https://wiki.telechips.com:8443/display/A2/fwdn.exe) -w ...\SD_Data.fai --storage ufs --area user --sector-size 4096 |
|----|

### Download Images to GPT Partition (Optional)

If you want to download only a specific partition, follow the example
below: Download “boot.img” to eMMC’s boot partition.

Depending on the storage, you should use different option as follows:

- eMMC: **--storage emmc**

| fwdn\> [fwdn.exe](https://wiki.telechips.com:8443/display/A2/fwdn.exe) -w ...\boot.img --storage emmc --area user --part boot_a |
|----|

- UFS: **--storage ufs** **--sector-size 4096**

| fwdn\> [fwdn.exe](https://wiki.telechips.com:8443/display/A2/fwdn.exe) -w ...\boot.img --storage ufs --sector-size 4096 --area user --part boot_a |
|----|

### Complete FWDN and Reset Board

Set the boot mode switch to the desired boot mode and reset the board.

# Booting Guide

This chapter describes booting guide for TCC807x EVB.

## Booting Guide for Board

### Booting Screen

After power is supplied to board for normal booting, U-Boot screen is
shown as follows:

<img src="media/image40.png" style="width:2.83194in;height:1.07222in" />

<span id="_Toc40947383" class="anchor"></span>Figure 6.1 U-Boot Screen

### Linux Console Login

After firmware writing is completed, you can see the log message on the
Linux console as shown in Figure 6.3.

<img src="media/image41.png" style="width:3.32292in;height:0.47917in" />

<span id="_Ref66433304" class="anchor"></span>Figure 6.2 Connected USB
to UART Bridge Interface

**Caution:** When resetting the EVB, you must remove USB cable from
USB2.0 DRD port to protect board and host PC.

To use the USB Type-C cable, check the driver first. If the driver is
not installed, install or re-install UART driver.

You can download the latest version at the official homepage:

- <https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers>

Connect UART serial cable to PC, to check console message.

- UART configuration is as follows:

<!-- -->

- Baud rate : 115200 bps

- Data bits : 8

- Stop bits : 1

- Parity : None

<!-- -->

- Login ID and Password are **root**.

<img src="media/image42.png" style="width:7.27639in;height:7.09375in" />

<span id="_Ref164947266" class="anchor"></span>Figure 6.3 Console Login

# References

1.  Contact Telechips for more details: <sales@telechips.com>

2.  Yocto Project Quick Build:
    <https://docs.yoctoproject.org/dev-manual/start.html>

3.  Yocto Project Wiki: <https://wiki.yoctoproject.org/wiki/Main_Page>

4.  Yocto Project Development Tasks Manual:
    <https://docs.yoctoproject.org/kernel-dev/index.html>

5.  Yocto Project Reference Manual:
    <https://docs.yoctoproject.org/ref-manual/index.html>

6.  Yocto Project Application Development and the Extensible Software
    Development Kit (eSDK):
    <https://docs.yoctoproject.org/sdk-manual/index.html>

7.  BitBake User Manual: <https://docs.yoctoproject.org/bitbake.html>

8.  TCC807x Common Hardware-Assembly Manual for EVB

9.  TCCxxxx Common-User Guide for Firmware Downloader V8

10. TC Common-User Guide for mktcimg

11. TCCxxxx Common SDK-Application Note for Touch Screen Driver

12. TCC807x Common Hardware-User Guide for EVB

13. TCC70xx Common-User Guide for Firmware Downloader_VCP

14. TCCxxxx Common SDK-User Guide for AUO and BOE touch IC

**Note**: Reference documents can be provided whenever available,
depending on the terms of a contract. If the reference documents are
unavailable, the contents directly related to your development can be
guided.

# Revision History

## Rev. 1.20: 2024-10-22

- Updated

<!-- -->

- Chapter 2.1: **Important**

- Chapter 4.5.1: Website address of repo

- Chapter 4.6.3.5.5: Added **Note**

- Chapter 5.2.3: Description and Source code (execute command)

- Chapter 7: Added \[14\]

<!-- -->

- Added

<!-- -->

- Chapter 5.2.3.1: snor_conf_maker

<!-- -->

- Deleted

<!-- -->

- Chapter 5.2.3.1: tcc807x.cfg

- Chapter 4.7.7.1: Use Network with Static IP

## Rev. 1.10: 2024-05-31

- Updated

<!-- -->

- Chapter
  [4.4.1](#linux-distribution-versions-supported-by-yocto-project):
  Website address of Yocto Project

- Chapter 4.4.2: Website address of Yocto Project

- Chapter 4.6.2.1: Source code (deleted pre2 from SDK name)

- Chapter 4.6.2.4:

<!-- -->

- Added description for step 2 (**Choose the manifest to repo**)

- Source code

<!-- -->

- Chapter [4.6.2.7.2](#modify): Source code of **modify feature** and
  **modify sub-feature**

- Chapter [4.6.3](#detailed-configuration): Overall description of order
  of sub-chapters

- Chapter
  [4.7.10](#q10.-how-to-build-multi-machine-from-one-kernel-or-u-boot-source):
  Website address of Yocto Project

- Chapter 4.8.1.1: Source code (deleted PRE2 from SDK name)

- Chapter 4.8.1.2: Source code (deleted PRE2 from SDK name)

- Chapter [6.1.2](#linux-console-login): Figure 6.3

- Chapter [7](#references): Website address of Yocto Project (from \[2\]
  to \[7\])

## Rev. 1.00: 2024-04-30

- Official version release

DISCLAIMER

All information and data contained in this material are without any
commitment, are not to be considered as an offer for conclusion of a
contract, nor shall they be construed as to create any liability. Any
new issue of this material invalidates previous issues. Product
availability and delivery are exclusively subject to our respective
order confirmation form; the same applies to orders based on development
samples delivered. By this publication, Telechips, Inc. does not assume
responsibility for patent infringements or other rights of third parties
that may result from its use.

Further, Telechips, Inc. reserves the right to revise this publication
and to make changes to its content, at any time, without obligation to
notify any person or entity of such revisions or changes.

No part of this publication may be reproduced, photocopied, stored on a
retrieval system, or transmitted without the express written consent of
Telechips, Inc.

This product is designed for general purpose, and accordingly customer
be responsible for all or any of intellectual property licenses required
for actual application. Telechips, Inc. does not provide any
indemnification for any intellectual properties owned by third party.

Telechips, Inc. cannot ensure that this application is the proper and
sufficient one for any other purposes but the one explicitly expressed
herein. Telechips, Inc. is not responsible for any special, indirect,
incidental, or consequential damage or loss whatsoever resulting from
the use of this application for other purposes.

Copyright Statement

Copyright in the material provided by Telechips, Inc. is owned by
Telechips unless otherwise noted.

For reproduction or use of Telechips’ copyright material, permission
should be sought from Telechips. That permission, if given, will be
subject to conditions that Telechips’ name should be included and
interest in the material should be acknowledged when the material is
reproduced or quoted, either in whole or in part. You must not copy,
adapt, publish, distribute, or commercialize any contents contained in
the material in any manner without the written permission of Telechips.
Trademarks used in Telechips’ copyright material are the property of
Telechips.

**Important Notice**

This material may include technology owned by the 3rd party licensor and
the technology may be subject to its associated licenses. It is solely
customer's responsibility to identify and comply with such licenses. No
other licenses are granted or implied by Telechips with making available
this material.

**<u>For customers who use licensed Codec ICs and/or licensed codec
firmware of mp3:</u>**

“Supply of this product does not convey a license nor imply any right to
distribute content created with this product in revenue-generating
broadcast systems (terrestrial. Satellite, cable and/or other
distribution channels), streaming applications (via internet, intranets
and/or other networks), other content distribution systems (pay-audio or
audio-on-demand applications and the like) or on physical media (compact
discs, digital versatile discs, semiconductor chips, hard drives, memory
cards and the like). An independent license for such use is required.
For details, please visit <http://mp3licensing.com>”.

**<u>For customers who use other firmware of mp3:</u>**

“Supply of this product does not convey a license under the relevant
intellectual property of Thomson and/or Fraunhofer Gesellschaft nor
imply any right to use this product in any finished end user or
ready-to-use final product. An independent license for such use is
required. For details, please visit <http://mp3licensing.com>”.

**<u>For customers who use Digital Wave DRA solution:</u>**

“Supply of this implementation of DRA technology does not convey a
license nor imply any right to this implementation in any finished
end-user or ready-to-use terminal product. An independent license for
such use is required.”

**<u>For customers who use DTS technology:</u>**

 "This product made under license to certain U.S. patents and/or foreign
counterparts."

 "© 1996 – 2011 DTS, Inc. All rights reserved."  

**<u>For customers who use Dolby technology:</u>**

"Supply of this Implementation of Dolby technology does not convey a
license nor imply a right under any patent, or any other industrial or
intellectual property right of Dolby Laboratories, to use this
Implementation in any finished end-user or ready-to-use final product.
It is hereby notified that a license for such use is required from Dolby
Laboratories."

**<u>For customers who use Google technology:</u>**

 "Copyright © 2013 Google Inc. All rights reserved.”

**<u>For customers who use MS technology:</u>**

"This product is subject to certain intellectual property rights of
Microsoft and cannot be used or distributed further without the
appropriate license(s) from Microsoft."

</Layout>
